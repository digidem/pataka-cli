(function(){var t={4017:function(t,e,n){"use strict";var a,r=n(1907),i=n(6644),o=n(5617),s=(n(6992),n(8674),n(9601),n(7727),n(144)),l=n(7283),c=n(5239),u=n(1096),p=n(3551),d=function(){var t=this,e=t._self._c;return e(u.Z,[t.displayAppBar?e("AppBar"):t._e(),e(p.Z,[e("router-view")],1),e("div",{staticClass:"version"},[e("span",[t._v("version")]),t._v(" "+t._s(t.version)+" ")])],1)},f=[],h=n(6080),g=(n(8309),n(629)),m=n(3250),v=function(){var t=this,e=t._self._c;return e("div",[e(m.Z,{attrs:{color:"#303030",flat:""}},[e("router-link",{staticClass:"logo-link",attrs:{to:"/"}},[e("img",{staticClass:"logo",attrs:{src:n(9432)}})])],1)],1)},b=[],y={name:"AppBar"},w=y,k=n(1001),Z=(0,k.Z)(w,v,b,!1,null,"4be6b7a9",null),x=Z.exports,_=n(9876),C=_.version,P=(0,g._p)("analytics"),I=P.mapActions,S=6e4,D={name:"App",data:function(){return{version:C}},methods:(0,h.Z)({},I(["patakaPing"])),created:function(){a||(this.patakaPing(),a=setInterval(this.patakaPing,10*S))},computed:{displayAppBar:function(){return"login"!==this.$route.name}},watch:{"$route.name":{handler:function(t,e){void 0!==e&&document.body.classList.remove("page--"+e.toLowerCase()),document.body.classList.add("page--"+t.toLowerCase())},immediate:!0}},components:{AppBar:x}},A=D,L=(0,k.Z)(A,d,f,!1,null,null,null),E=L.exports,B=n(8345),$=n(7179),N=n(4437),T=n(6035),F=n(3296),M=n(5057),O=n(6275),j=n(1302),q=n(5294),z=(n(2526),n(1817),function(){var t=this,e=t._self._c;return e("div",{staticClass:"wrapper"},[e(T.Z,{staticClass:"px-12",attrs:{fluid:""}},[e(q.Z,{attrs:{justify:"center"}},[e(N.Z,{staticClass:"pt-0",attrs:{cols:"4"}},[t.loading?e(O.Z,{staticClass:"d-flex ma-auto",attrs:{width:3,color:"#0484c4",indeterminate:"",absolute:""}}):e("div",[e(F.Z,{attrs:{value:!0}},[e("Avatar",{staticClass:"pb-4",attrs:{size:"180px",type:"pataka",alt:t.profile.preferredName,image:t.profile.avatarImage,showEdit:""},on:{edit:t.toggleEditDialog}})],1),e("h1",{staticClass:"text-uppercase text-center"},[t._v(t._s(t.profile.preferredName))]),e("p",{staticClass:"grey--text text-center caption overflow-wrap"},[t._v(t._s(t.profile.description))])],1),e(N.Z,{staticClass:"mx-auto mt-8",attrs:{cols:"7"}},[e(q.Z,{staticClass:"py-2",attrs:{justify:"start",align:"center"}},[e("div",{staticClass:"dot mr-4 internet-dot",class:t.network.internetLatency?-1===t.network.internetLatency?"red":"green":"grey"}),e("p",{staticClass:"caption text-uppercase text-center ma-0"},[t._v(" "+t._s(t.network.internetLatency?-1===t.network.internetLatency?"Offline":"Online":"Checking")+" ")]),e("span",{staticClass:"network-latency"},[t._v(t._s(t.latency))])]),e(q.Z,{staticClass:"py-2 network-local",attrs:{justify:"start",align:"center"}},[e("div",{staticClass:"dot mr-4",class:t.network.ipv4?"green":"grey"}),e("p",{staticClass:"caption text-uppercase ma-0"},[t._v(" "+t._s(t.network.ipv4?" Local Network":"Checking")+" ")])]),e(q.Z,{staticClass:"py-2",attrs:{justify:"start",align:"center"}},[e("div",{staticClass:"dot mr-4",class:t.network.portForwarding?"green":null===t.network.internetLatency?"grey":"orange"}),e("p",{staticClass:"caption text-uppercase text-center ma-0"},[t._v(" "+t._s(t.network.portForwarding?"Port-Forwarding":null===t.network.portForwarding?"Checking":"Port-Forwarding Off")+" ")])]),e(q.Z,{staticClass:"mt-8",attrs:{justify:"center"}},[e("h2",{staticStyle:{"text-align":"center"}},[t._v("Disk Usage")]),t._l(t.diskUsage,(function(n){return e(j.Z,{key:n.fs,staticClass:"mt-4",attrs:{value:n.use,height:"25",color:"blue-grey"}},[e("strong",{staticClass:"pr-2"},[t._v(t._s(Math.ceil(n.use))+"%")]),e("span",{staticClass:"caption"},[t._v(t._s(n.fs))])])}))],2),t.cloudHost?e(q.Z,{attrs:{align:"center"}},[e($.Z,{staticClass:"mt-6",attrs:{width:"100%",color:"red",outlined:""},on:{click:t.logout}},[t._v(" logout ")])],1):t._e()],1)],1),e(N.Z,{attrs:{cols:"8"}},[e(q.Z,[e(N.Z,{attrs:{cols:"12"}},[t.generatingCode?e(O.Z,{attrs:{indeterminate:"",color:"#0484c4",width:"2"}}):e($.Z,{attrs:{color:"#53cb62",outlined:"",disabled:null===t.network.portForwarding},on:{click:function(e){return t.toggleDialog()}}},[t._v(" "+t._s(t.network.ipv4?"Generate join code":"Loading network data")+" ")])],1),t.generateError?e(N.Z,[e("p",{staticClass:"red--text caption mb-0"},[t._v(t._s(t.generateError))])]):t.generatedInvite?e(N.Z,{staticClass:"generated-code pl-6",attrs:{cols:"12"}},[e(q.Z,[e("p",{staticClass:"overline pt-2"},[t._v("Pātaka code:")])]),e(q.Z,[e("p",{staticClass:"pa-2",attrs:{id:"invite-code"}},[t._v(t._s(t.generatedInvite))])]),e(q.Z,[t.cloudHost?t._e():e($.Z,{staticClass:"text-uppercase",attrs:{color:"#0484c4",outlined:"",justify:"end"},on:{click:t.copyCode}},["Copy"===t.copyText?e(M.Z,{attrs:{small:"",left:""}},[t._v("mdi-content-copy")]):e(M.Z,{attrs:{small:"",left:""}},[t._v("mdi-check")]),t._v(" "+t._s(t.copyText)+" ")],1),e($.Z,{staticClass:"ml-6",attrs:{color:"#cb53a5",outlined:""},on:{click:function(e){return t.toggleInviteDialog()}}},[t._v(" send invite ")])],1)],1):t._e()],1),e(q.Z,{staticClass:"stat-column"},[e(N.Z,{attrs:{cols:"6"}},[e("Meter",{attrs:{title:"CPU",values:t.cpuLoad}})],1),e(N.Z,{attrs:{cols:"6"}},[e("Meter",{attrs:{title:"RAM",values:t.memoryLoad}})],1)],1),e(q.Z,{staticClass:"pt-6"},[e(N.Z,{staticClass:"stat-column",attrs:{cols:"6"}},[e("h2",{staticClass:"h2 text-uppercase pb-8"},[t._v("People")]),t.connectedPeople&&0!==t.connectedPeople.length?e(q.Z,{staticClass:"pb-2"},[e("div",[e("AvatarGroup",{attrs:{profiles:t.connectedPeople,size:"60px",showLabel:""}})],1)]):e("p",{staticClass:"caption"},[t._v("There is no one connected to your network")])],1),e(N.Z,{staticClass:"stat-column pl-6",attrs:{cols:"6"}},[e("h2",{staticClass:"h2 text-uppercase pb-8"},[t._v("Tribes")]),0===t.tribes.length?e("p",{staticClass:"caption"},[t._v("There are no tribes on your network")]):t._e(),e(q.Z,{staticClass:"pb-2"},[t.tribes&&t.tribes.length>0?e("div",[e("AvatarGroup",{attrs:{profiles:t.tribes,size:"60px",showLabel:""}})],1):t._e()])],1)],1)],1)],1)],1),t.dialog?e("GenerateInviteDialog",{attrs:{show:t.dialog,publicIpv4:t.network.publicIpv4,portForwarding:t.network.portForwarding,checkPortForwarding:t.checkPortForwarding,checkingPort:t.checkingPort,title:"Generate Invite Code",errorMsg:t.errorMsg,cloudHost:t.cloudHost},on:{close:t.toggleDialog,generate:function(e){return t.generateInviteCode(e)}}}):t._e(),t.editNodeDialog?e("NewNodeDialog",{attrs:{show:t.editNodeDialog,title:"Āhau Pātaka",profile:t.profile},on:{close:t.toggleEditDialog,save:function(e){return t.save(e)}}}):t._e(),t.inviteDialog?e("SendInviteDialog",{attrs:{show:t.inviteDialog,title:"Send Pātaka Invite Code",errorMsg:t.errorMsg,uses:t.uses,code:t.generatedInvite,name:t.profile.preferredName},on:{close:t.toggleInviteDialog,codeSent:function(e){return t.showSnackbar("Code successfully sent")}}}):t._e(),t.snackbar?e("Snackbar",{attrs:{show:t.snackbar,message:t.snackbarMsg},on:{clearSnackbar:t.clearSnackbar}}):t._e()],1)}),U=[],H=n(3698),R=(n(7327),n(1539),n(2222),n(1249),n(7658),n(8819)),V=n(2469),G=n(8236),W=function(){var t=this,e=t._self._c;return e("div",[e(N.Z,[e(q.Z,{attrs:{justify:"center"}},[e(F.Z,{scopedSlots:t._u([{key:"default",fn:function(n){var a=n.hover;return[e(R.Z,{staticClass:"avatar-container",class:{isEditing:t.isEditing},attrs:{size:t.size,tile:t.tile,dark:t.dark}},[t.image&&t.image.uri?e(V.Z,{attrs:{src:t.hackURL(t.image.uri),alt:t.alt}}):e(V.Z,{staticClass:"no-pic",style:t.customStyle,attrs:{src:t.getImage}}),e(G.Z,{attrs:{absolute:"",opacity:"0.5",value:a}},[t.showLabel?e("p",{staticClass:"text-center pt-2",staticStyle:{"font-size":"12px"}},[t._v(t._s(t.alt))]):t.showEdit?e(M.Z,{on:{click:function(e){return t.$emit("edit")}}},[t._v(" mdi-pencil ")]):t._e()],1)],1)]}}])})],1)],1)],1)},X=[],K=(n(8783),n(3948),n(285),n(1637),n.p+"img/tane.b97713f0.svg"),J=n.p+"img/wahine.6307c174.svg",Q=n.p+"img/diverse.b5a2eb18.svg",Y=n.p+"img/whakapapa.27a898a4.svg",tt={defaultImage:et};function et(t,e){switch(t){case"person":switch(e){case"male":return K;case"female":return J;case"other":case"unknown":default:return Q}case"pataka":case"whakapapa":default:return Y}}var nt,at={name:"Avatar",props:{showOnHover:Boolean,image:Object,alt:String,gender:String,type:{type:String,default:"person"},size:{type:String,default:"25vh"},showLabel:{type:Boolean,default:!1},showEdit:{type:Boolean,default:!1},clickable:{type:Boolean,default:!1},isEditing:{type:Boolean,default:!1},offline:{type:Boolean,default:!1},dark:Boolean,tile:Boolean},data:function(){return{hovered:!1}},computed:{getImage:function(){return tt.defaultImage(this.type,this.gender||null)},customStyle:function(){return{opacity:this.offline?.5:1}}},components:{},methods:{hackURL:function(t){var e=new URL(t);return e.hostname=window.location.hostname,e.href},updateAvatar:function(t){this.$emit("updateAvatar",t)}}},rt=at,it=(0,k.Z)(rt,W,X,!1,null,"b0d6faae",null),ot=it.exports,st=function(){var t=this,e=t._self._c;return e(N.Z,{staticClass:"pt-0 pb-0"},[t.groupTitle?e(q.Z,[e(N.Z,{staticClass:"pt-1 pb-0"},[e("small",{staticClass:"label overline"},[t._v(" "+t._s(t.groupTitle)+" ")])])],1):t._e(),e(q.Z,{class:t.customClass},[t._l(t.profiles,(function(n,a){return e("div",{key:"".concat(t.groupTitle,"-").concat(a),class:t.spacing,attrs:{width:"100%"}},[e("div",{staticClass:"pt-2",attrs:{justify:"center"}},[e("Avatar",{attrs:{size:t.size,isEditing:!1,type:n.type,image:n.avatarImage,alt:n.preferredName,gender:n.gender,showLabel:t.showLabels,clickable:t.clickable,deletable:t.deletable,dark:t.dark,row:t.row,tile:t.tile},on:{click:function(e){return t.profileClick(n)},delete:function(e){return t.$emit("delete",a)}}})],1)])})),t._t("action")],2)],1)},lt=[],ct={name:"AvatarGroup",components:{Avatar:ot},props:{profiles:{type:Array,default:null},groupTitle:{type:String,default:null},showLabels:{type:Boolean,default:!0},size:{type:String,default:"80px"},customClass:{type:String,default:"d-flex justify-start align-center pa-2 pl-4"},spacing:{type:String,default:"pr-5"},deletable:Boolean,tile:Boolean,clickable:{type:Boolean,default:!0},dark:Boolean,row:Boolean},computed:{columns:function(){return this.profiles.length}},methods:{profileClick:function(t){this.$emit("profile-click",t)}}},ut=ct,pt=(0,k.Z)(ut,st,lt,!1,null,"698b1b22",null),dt=pt.exports,ft=n(7738),ht=n(5251),gt=function(){var t=this,e=t._self._c;return e("Dialog",{attrs:{show:t.show,title:t.title,width:"720px",goBack:t.close,enableMenu:""},on:{close:t.close},scopedSlots:t._u([{key:"content",fn:function(){return[e(N.Z,{staticStyle:{color:"black"}},[e(q.Z,[e(N.Z,{attrs:{cols:"6"}},[e(ht.Z,{attrs:{"error-messages":t.errorMsg,label:"This machines public IP",outlined:""},model:{value:t.ip,callback:function(e){t.ip=e},expression:"ip"}})],1),e(N.Z,{staticClass:"mt-4"},[e(q.Z,{staticClass:"py-2",attrs:{justify:"start",align:"center"}},[e("div",{staticClass:"dot mr-4",class:t.portForwarding?"green":"orange"}),e("p",{staticClass:"caption text-uppercase text-center ma-0"},[t._v(" "+t._s(t.portForwarding?"Port-Forwarding":null===t.portForwarding?"Checking":"Port-Forwarding Off")+" ")])])],1)],1),t.portForwarding?t._e():e("div",[e("p",[t._v("Our portfordward checks indicate that you have not setup portforwarding.")]),e("p",[t._v(" In order for others to connect to this Pātaka over the Internet you'll need to enable "),e("a",{attrs:{href:"https://en.wikipedia.org/wiki/Port_forwarding",target:"_blank"}},[t._v("Port-Forwarding")]),t._v(" on your router. ")]),e("p",[t._v("Depending on your router, our portfordwarding checks maybe by inaccurate. If you believe you have correctly setup port forwarding then we recommend that you test generating a code using your internet connection")]),e("p",[t._v("Alternatively you can also connect locally without the internet via wifi. If you want to do this then please select use local network")])]),e(q.Z,[e(N.Z,[e("p",{staticClass:"overline"},[t._v("Select number of uses")]),e(ft.Z,{staticStyle:{"max-width":"300px"},attrs:{items:["single use","100 uses","1,000 uses","100,000 uses"],outlined:"",placeholder:"single use","persistent-placeholder":"",autofocus:""},model:{value:t.value,callback:function(e){t.value=e},expression:"value"}})],1),e(N.Z,[e("p",{staticClass:"overline"},[t._v("Select connection")]),e(ft.Z,{staticStyle:{"max-width":"300px"},attrs:{items:t.portForwarding?["Connect globally over internet"]:["Connect globally over internet","Connect locally over wifi"],outlined:"",placeholder:t.portForwarding?"connect globally over internet":"connect locally over wifi","persistent-placeholder":"",autofocus:""},model:{value:t.type,callback:function(e){t.type=e},expression:"type"}})],1)],1)],1)]},proxy:!0},{key:"actions",fn:function(){return[e("div",[e($.Z,{staticClass:"primary--text my-2",attrs:{text:"",large:""},on:{click:function(e){return t.submit()}}},[t._v("Generate code")])],1)]},proxy:!0}])})},mt=[],vt=n(3058),bt=n(5223),yt=n(2570),wt=n(4192),kt=n(5234),Zt=function(){var t=this,e=t._self._c;return e(yt.Z,{attrs:{"max-width":t.width,light:!t.dark,fullscreen:t.mobile,transition:t.mobile?"dialog-bottom-transition":"scale-transition"},on:{input:t.close},model:{value:t.showDialog,callback:function(e){t.showDialog=e},expression:"showDialog"}},[e(vt.Z,[e(m.Z,{attrs:{color:"#292929",dark:!t.dark,src:t.banner,flat:"",dense:"",height:"60px","max-height":"60px"},scopedSlots:t._u([{key:"img",fn:function(n){var a=n.props;return[e(V.Z,t._b({staticStyle:{opacity:"40%",left:"100px"}},"v-img",a,!1))]}}])},[t.mobile?e($.Z,{attrs:{icon:""},on:{click:t.closeDialog}},[e(M.Z,[t._v("mdi-arrow-left")])],1):t._e(),t.mobile?e(kt.Z,{staticStyle:{"min-width":"10%"}}):t._e(),e("div",{staticClass:"dialog-title text-uppercase",style:t.mobile?"text-align:end":""},[e("span",{staticStyle:{color:"#BA041B"}},[t._v(t._s(t.splitTitle.maori))]),e("span",[t._v(t._s(t.splitTitle.english))])]),t.mobile?t._e():e(kt.Z),t.mobile?t._e():e($.Z,{attrs:{icon:""},on:{click:t.closeDialog}},[e(M.Z,[t._v("mdi-close")])],1)],1),e(bt.ZB,{staticClass:"pa-3",style:t.mobile?"overflow-x: hidden;":"max-height: 650px; overflow-x: hidden;"},[t._t("content")],2),e(wt.Z),t.hideActions?t._e():e(bt.h7,{staticClass:"pa-0"},[e(T.Z,{staticClass:"py-0"},[e(q.Z,{staticClass:"ma-0",attrs:{align:"end"}},[t.$slots["before-actions"]?e(N.Z,{staticClass:"py-0",attrs:{cols:"12",md:"auto",align:t.mobile?"center":"start"}},[t._t("before-actions")],2):t._e(),t.mobile?t._e():e(kt.Z),t._t("actions",(function(){return[e(N.Z,{attrs:{cols:"6",md:"auto",align:"center"}},[e($.Z,{staticClass:"secondary--text",attrs:{text:"",large:!t.mobile},on:{click:t.close}},[t._v(" Cancel ")])],1),e(N.Z,{attrs:{cols:"6",md:"auto",align:"center"}},[e($.Z,{attrs:{large:!t.mobile,text:"",color:"blue"},on:{click:t.submit}},[t._v(" Save ")])],1)]}))],2)],1)],1)],1)],1)},xt=[],_t=(n(9600),n(7042),n(4916),n(3123),n.p+"img/bg-tohu.8ab98236.png"),Ct={name:"Dialog",props:{show:{type:Boolean,required:!1},isEditing:{type:Boolean,required:!1},width:{type:String,required:!1,default:"1000px"},height:{type:String,default:"calc(100vh)"},background:{type:String,default:""},goBack:Function,enableMenu:Boolean,enableBar:{type:Boolean,default:!0},title:String,dark:Boolean,hideActions:Boolean},data:function(){return{showDialog:this.show,listener:null,banner:_t,isSubmitting:!1}},computed:{mobile:function(){return this.$vuetify.breakpoint.xs||this.$vuetify.breakpoint.sm},style:function(){return{position:"fixed",backgroundColor:"#292929",maxWidth:this.width}},splitTitle:function(){var t={},e=this.title,n="----";if(-1!==e.indexOf(n)){var a="-",r=2,i=e.split(a).slice(0,r+1).join(a),o=e.split(a).slice(r).join(a);return t={maori:i,english:o},t}return t={maori:"",english:e},t}},methods:{submit:function(){this.isSubmitting||(this.isSubmitting=!0,this.$emit("submit"))},closeDialog:function(){this.isSubmitting=!1,this.showDialog=!1,this.close()},close:function(){this.isSubmitting=!1,this.$emit("close")}},mounted:function(){var t=this;this.listener=document.addEventListener("keydown",(function(e){27===e.keyCode&&t.close()})),document.body.style.top="-".concat(window.scrollY,"px"),document.body.style.minWidth="100%",document.body.style.position="fixed"},destroyed:function(){document.removeEventListener("keydown",this.listener);var t=document.body.style.top;document.body.style.position="",document.body.style.top="",window.scrollTo(0,-1*parseInt(t||"0"))}},Pt=Ct,It=(0,k.Z)(Pt,Zt,xt,!1,null,null,null),St=It.exports,Dt={name:"GenerateInviteDialog",components:{Dialog:St},props:{show:{type:Boolean,required:!0},title:{type:String},publicIpv4:{type:String,default:"xxx.xxx.xx.xx"},portForwarding:{type:Boolean,default:!0},checkPortForwarding:{type:Function},checkingPort:{type:Boolean,default:!1},errorMsg:{type:String},cloudHost:{type:Boolean}},data:function(){return{type:"",value:"",externalIp:null}},computed:{ip:{get:function(){return this.externalIp||this.publicIpv4},set:function(t){this.externalIp=t}},uses:function(){switch(this.value){case"single use":return 1;case"100 uses":return 100;case"1,000 uses":return 1e3;case"100,000 uses":return 1e5;default:return 1}}},methods:{submit:function(){var t;t=this.cloudHost?window.location.hostname:"Connect locally over wifi"===this.type?null:this.externalIp||this.publicIpv4,this.$emit("generate",{ip:t,uses:this.uses}),this.close()},close:function(){this.$emit("close")}}},At=Dt,Lt=(0,k.Z)(At,gt,mt,!1,null,"e567785e",null),Et=Lt.exports,Bt=n(3917),$t=function(){var t=this,e=t._self._c;return e("Dialog",{attrs:{show:t.show,title:t.title,width:"45vw",goBack:t.close,enableMenu:"",hideActions:""},on:{close:t.close},scopedSlots:t._u([{key:"content",fn:function(){return[e(q.Z,{staticClass:"mx-2"},[e(N.Z,{attrs:{cols:"12"}},[e(q.Z,[e(N.Z,{staticClass:"mt-4",attrs:{cols:"12"}},[t.uses>1?e("p",[t._v("Enter email addresses")]):e("p",[t._v("Enter email address")]),e(ht.Z,{ref:"input",attrs:{messages:t.messages},on:{keyup:[function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"space",32,e.key,[" ","Spacebar"])?null:t.add.apply(null,arguments)},function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"delete",[8,46],e.key,["Backspace","Delete","Del"])?null:t.removeLast.apply(null,arguments)}],focus:function(e){t.inputActive=!0},blur:function(e){t.inputActive=!1}},scopedSlots:t._u([{key:"prepend-inner",fn:function(){return t._l(t.invitees,(function(n,a){return e("div",{key:a},[e(Bt.Z,{staticClass:"ma-1",attrs:{close:""},on:{"click:close":function(e){return t.remove(n)}}},[t._v(" "+t._s(n)+" ")])],1)}))},proxy:!0}]),model:{value:t.input,callback:function(e){t.input=e},expression:"input"}})],1)],1)],1)],1),e(q.Z,{staticClass:"mx-2"},[e(N.Z,{staticClass:"py-0",staticStyle:{"margin-bottom":"20px"},attrs:{align:"left"}},[t.sending?e(O.Z,{attrs:{width:"2",indeterminate:"",color:"#0484c4"}}):e($.Z,{staticClass:"white--text",attrs:{color:"black"},on:{click:function(e){return t.send()}}},[e(M.Z,{attrs:{small:""}},[t._v("mdi-send")]),t._v(" "),e("span",{staticClass:"pl-2"},[t._v(" send")])],1),t.errorMsg?e("p",{staticClass:"red--text"},[t._v(t._s(t.errorMsg))]):t._e()],1)],1)]},proxy:!0}])})},Nt=[],Tt=(n(9653),n(8862),n(561),{name:"SendInviteDialog",components:{Dialog:St},props:{show:{type:Boolean,required:!0},title:String,code:String,uses:Number,name:String},data:function(){return{invitees:[],input:"",inputActive:!1,canPop:!1,count:0,errorMsg:null,sending:!1}},computed:{messages:function(){return 1===this.uses?"Code limited to a single use":""}},methods:{add:function(){var t=this;this.input.length&&((this.uses>1||!this.invitees.length)&&this.invitees.push(this.input),this.input="",this.count=0),setTimeout((function(){return t.$refs.input.focus()}),100)},send:function(){var t=this;this.sending=!0;var e={emails:this.invitees.length?this.invitees:this.input,code:this.code,name:this.name},n=new FormData;n.append("json",JSON.stringify(e)),fetch("https://ahau.io/sendInvite",{method:"post",body:n}).then((function(e){200===e.status?(t.sending=!1,t.$emit("codeSent"),t.close()):(t.sending=!1,t.errorMsg="Error sending code. Please send manually")})),this.$emit("codeSent"),this.close()},close:function(){this.errorMsg=null,this.$emit("close")},remove:function(t){this.invitees.splice(this.invitees.indexOf(t),1)},removeLast:function(){var t=this;this.$refs.input.focus&&!this.input.length&&this.invitees.length&&(this.count++,this.count>1&&this.invitees.pop(),setTimeout((function(){return t.$refs.input.focus()}),100))}}}),Ft=Tt,Mt=(0,k.Z)(Ft,$t,Nt,!1,null,"70038857",null),Ot=Mt.exports,jt=n(1692),qt=function(){var t=this,e=t._self._c;return e(jt.Z,{attrs:{timeout:"2000",outlined:"",color:"success"},scopedSlots:t._u([{key:"action",fn:function(n){var a=n.attrs;return[e($.Z,t._b({attrs:{color:"success",text:""},on:{click:function(e){t.snackbar=!1}}},"v-btn",a,!1),[e("b",[t._v("Close")])])]}}]),model:{value:t.showSnackbar,callback:function(e){t.showSnackbar=e},expression:"showSnackbar"}},[t._v(" "+t._s(t.message)+" ")])},zt=[],Ut={name:"snackbar",props:{show:Boolean,message:String},computed:{showSnackbar:{get:function(){return this.show},set:function(t){!1===t&&this.$emit("clearSnackbar")}}}},Ht=Ut,Rt=(0,k.Z)(Ht,qt,zt,!1,null,null,null),Vt=Rt.exports,Gt=n(9868),Wt=n(3625),Xt=function(){var t=this,e=t._self._c;return e(vt.Z,{staticClass:"mt-4",attrs:{"max-width":"400"}},[e(Gt.Z,{staticClass:"v-sheet--offset mx-auto",attrs:{color:"primary",tile:""}},[e(bt.ZB,[e(q.Z,{staticClass:"mt-0 ml-0",attrs:{align:"end"}},[e("h2",[t._v(t._s(t.title))]),t._v(" "),e("span",{staticClass:"pl-4 caption"},[t._v("usage in last hour")])])],1),e(Wt.Z,{attrs:{labels:t.labels,value:t.values,gradient:["red","#0484c4","#53cb62"],"line-width":"1",padding:"16"}})],1)],1)},Kt=[],Jt={name:"Meter",props:{title:String,labels:Array,values:Array}},Qt=Jt,Yt=(0,k.Z)(Qt,Xt,Kt,!1,null,"60b500b3",null),te=Yt.exports,ee=function(){var t=this,e=t._self._c;return e("Dialog",{attrs:{show:t.show,title:t.title,width:"720px",goBack:t.close,enableMenu:""},on:{close:t.close},scopedSlots:t._u([{key:"content",fn:function(){return[e(N.Z,{staticClass:"py-0"},[e("ProfileForm",{attrs:{profile:t.formData,mobile:t.mobile},on:{"update:profile":function(e){t.formData=e}}})],1)]},proxy:!0},{key:"actions",fn:function(){return[e($.Z,{staticClass:"secondary--text",attrs:{text:"",large:"",fab:""},on:{click:t.close}},[e("span",{attrs:{color:"secondary"}},[t._v("cancel")])]),e($.Z,{staticClass:"blue--text ml-5",attrs:{text:"",large:"",fab:""},on:{click:t.submit}},[e("span",[t._v("save")])])]},proxy:!0}])})},ne=[],ae=n(8910),re=(n(4747),n(9720),n(6904)),ie=n(5139),oe=function(){var t=this,e=t._self._c;return e(re.Z,{ref:"form",staticClass:"px-4 pt-4",attrs:{light:""}},[e(q.Z,[e(N.Z,{staticClass:"pt-6",attrs:{order:t.mobile?"":"2"}},[e(q.Z,{staticClass:"justify-center pt-3"},[e("Avatar",{staticClass:"big-avatar",attrs:{size:"200px",type:"pataka",image:t.formData.avatarImage,alt:t.formData.preferredName,isView:!1},on:{updateAvatar:function(e){t.formData.avatarImage=e}}})],1),e(q.Z,[e(N.Z,{staticClass:"pa-0",attrs:{cols:"12",justify:"center",align:"center"}},[e("ImagePicker",{attrs:{avatarLoaded:t.formData.avatarImage},on:{updateAvatar:function(e){t.formData.avatarImage=e}}})],1)],1)],1),e(N.Z,{staticClass:"pt-2",attrs:{cols:"12",sm:t.mobile?"12":"6"}},[e(q.Z,[e(N.Z,{staticClass:"pa-1",attrs:{cols:"12"}},[e(ht.Z,{attrs:{label:"Pātaka name",outlined:"",rules:t.nameRules,required:""},model:{value:t.formData.preferredName,callback:function(e){t.$set(t.formData,"preferredName",e)},expression:"formData.preferredName"}})],1)],1),e(q.Z,[e(N.Z,{staticClass:"pa-1",attrs:{cols:"12"}},[e(ie.Z,{attrs:{label:"Description","no-resize":"",rows:"5","auto-grow":"",outlined:""},model:{value:t.formData.description,callback:function(e){t.$set(t.formData,"description",e)},expression:"formData.description"}})],1)],1)],1)],1)],1)},se=[],le=function(){var t=this,e=t._self._c;return e("div",[e("clipper-upload",{attrs:{accept:"image/*"},on:{input:t.toggleAvatar}},[e(q.Z,{staticClass:"upload-pic-row"},[e(M.Z,{staticClass:"grey--text pr-2 pt-1"},[t._v("mdi-camera")]),e("p",{staticClass:"toggle"},[t._v(" "+t._s(t.label||"Upload Photo")+" ")])],1)],1),t.avatar.showEditor?e("AvatarEditDialog",{attrs:{show:t.avatar.showEditor,avatarImage:t.avatar.new,isView:t.isView,type:t.type},on:{submit:function(e){return t.updateAvatar(e)},close:function(e){return t.toggleAvatar(null)}}}):t._e()],1)},ce=[],ue=function(){var t=this,e=t._self._c;return e("Dialog",{attrs:{title:"Crop Photo",show:t.show,width:"750px",goBack:t.close,enableMenu:"",dark:""},on:{submit:t.submit,close:t.close},scopedSlots:t._u([{key:"content",fn:function(){return[e(q.Z,{attrs:{justify:"center"}},[e(N.Z,{staticStyle:{"max-width":"300px"}},[e("clipper-fixed",{ref:"avatar",attrs:{grid:!1,src:t.avatarImage,area:100,round:!t.tile,"bg-color":"rgba(0, 0, 0, 0)",shadow:"rgba(0,0,0,0.5)",rotate:t.rotation}})],1)],1),e("div",{staticClass:"px-8 py-4"},[e("h6",{staticClass:"caption pt-8 white--text"},[e(M.Z,{attrs:{dark:""}},[t._v("mdi-gesture-tap")]),t._v(" Adjust the image by zooming, scaling and moving it around before saving. ")],1),e("h5",{staticClass:"pt-8 white--text"},[t._v("rotate")]),e("clipper-range",{staticStyle:{"max-width":"300px"},attrs:{min:0,max:360},model:{value:t.rotation,callback:function(e){t.rotation=e},expression:"rotation"}})],1)]},proxy:!0}])})},pe=[];n(1703);function de(t){return new window.File([t],"avatar",{type:t.type})}var fe=(0,l.ZP)(nt||(nt=(0,i.Z)(["\n  mutation uploadFile($file: Upload!, $size: Int!, $encrypt: Boolean) {\n    uploadFile(file: $file, size: $size, encrypt: $encrypt) {\n      type\n      blobId\n      mimeType\n      uri\n      size\n\n      ...on BlobScuttlebutt {\n        unbox\n      }\n\n      ...on BlobHyper {\n        driveAddress\n        readKey\n      }\n    }\n  }\n"])));function he(t){return{mutation:fe,variables:{file:t.file,size:t.file.size,encrypt:t.encrypt}}}var ge,me,ve,be,ye,we,ke,Ze,xe,_e,Ce,Pe,Ie,Se="$2a$10$EHZEoQfUA3XmnhwVfhdcSuV3BZvQwMo4/YUuMdXeX3lbiIbP5BHMy",De=1048576,Ae=5*De,Le={name:"AvatarEditDialog",components:{Dialog:St},props:{show:{type:Boolean,default:!1},avatarImage:String,tile:Boolean},data:function(){return{rotation:0}},methods:{close:function(){this.$emit("close")},submit:function(){var t=this;return(0,o.Z)((0,r.Z)().mark((function e(){var n;return(0,r.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:try{n=t.$refs.avatar.clip({maxWPixel:"header"===t.type?1920:800}),n.toBlob(function(){var e=(0,o.Z)((0,r.Z)().mark((function e(n){var a,i,o;return(0,r.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(a=de(n),!(a.size>=5242880)){e.next=4;break}throw console.error("this avatar image is bigger than 5MB, we cannot allow this through, otherwise it will end up a hyperblob, which AvatarImage does not currently support"),new Error("avatar image must me < 5MB");case 4:return e.next=6,t.uploadFile({file:a,encrypt:!0});case 6:i=e.sent,null===i.mimeType&&(i.mimeType=a.type),"Hello World"===i.mimeType&&(i.mimeType=a.type),i.blobId&&(i.blob=i.blobId),delete i.blobId,o={},Object.entries(i).forEach((function(t){var e=(0,ae.Z)(t,2),n=e[0],a=e[1];"__typename"!==n&&"type"!==n&&(o[n]=a)})),t.$emit("submit",o);case 14:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}catch(a){console.error("Error editing avatar",a)}case 1:case"end":return e.stop()}}),e)})))()},uploadFile:function(t){var e=this;return(0,o.Z)((0,r.Z)().mark((function n(){var a;return(0,r.Z)().wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(n.prev=0,!(t.file&&t.file.size>Ae)){n.next=3;break}throw new Error("Please check the file size is less than 5MB");case 3:return n.next=5,e.$apollo.mutate(he(t));case 5:if(a=n.sent,!a.errors){n.next=8;break}throw a.errors;case 8:return n.abrupt("return",a.data.uploadFile);case 11:return n.prev=11,n.t0=n["catch"](0),console.error("Something went wrong while trying to upload a file",n.t0),n.abrupt("return",null);case 15:case"end":return n.stop()}}),n,null,[[0,11]])})))()}}},Ee=Le,Be=(0,k.Z)(Ee,ue,pe,!1,null,null,null),$e=Be.exports,Ne={name:"ImagePicker",components:{AvatarEditDialog:$e},props:{label:{type:String},isView:{type:Boolean,default:!1},type:String},data:function(){return{avatar:{new:null,showEditor:!1}}},methods:{toggleAvatar:function(t){this.avatar.new=this.avatar.new?null:t,this.avatar.showEditor=!this.avatar.showEditor},updateAvatar:function(t){this.$emit("updateAvatar",t),this.toggleAvatar(null)}}},Te=Ne,Fe=(0,k.Z)(Te,le,ce,!1,null,"416cf575",null),Me=Fe.exports,Oe={name:"ProfileForm",components:{Avatar:ot,ImagePicker:Me},props:{profile:{type:Object,required:!0},mobile:{type:Boolean,default:!1}},data:function(){return{formData:{},form:{valid:!0,showDescription:!1},nameRules:[function(t){return!!t||"Pataka name required"}]}},watch:{profile:{deep:!0,immediate:!0,handler:function(t){this.formData=t}}}},je=Oe,qe=(0,k.Z)(je,oe,se,!1,null,"1ad8a51e",null),ze=qe.exports,Ue=n(9245),He=n.n(Ue),Re=n(2307),Ve=n.n(Re),Ge=n(841),We=n.n(Ge),Xe={name:"NewNodeDialog",components:{Dialog:St,ProfileForm:ze},props:{show:{type:Boolean,required:!0},title:{type:String,default:"Create a new Pātaka"},profile:{type:Object,default:function(){return{}}}},data:function(){return{formData:{}}},watch:{profile:{deep:!0,immediate:!0,handler:function(t){this.formData=We()(t)}}},computed:{mobile:function(){return this.$vuetify.breakpoint.xs},submission:function(){var t=this,e={};return Object.entries(this.formData).forEach((function(n){var a=(0,ae.Z)(n,2),r=a[0],i=a[1];He()(t.formData[r])||(e[r]=i)})),e}},methods:{getProfileChanges:function(){var t=this,e={};return Object.entries(this.submission).forEach((function(n){var a=(0,ae.Z)(n,2),r=a[0],i=a[1];Ve()(t.submission[r],t.profile[r])||(e[r]=i)})),e},submit:function(){if(!this.submission||this.submission.preferredName){var t=this.getProfileChanges(this.submission);this.$emit("save",t),this.close()}},close:function(){this.resetFormData(),this.$emit("close")},resetFormData:function(){this.formData={}}}},Ke=Xe,Je=(0,k.Z)(Ke,ee,ne,!1,null,"5450636a",null),Qe=Je.exports,Ye=n(5030),tn=n.n(Ye),en=1e3,nn={name:"Dashboard",data:function(){return{dialog:!1,ipSet:!1,copyText:"Copy",generatedInvite:null,generateError:!1,errorMsg:null,checkingPort:null,invitedPeople:[],tribes:[],profile:{feedId:"",preferredName:"",description:"",avatarImage:null},portForwarding:null,network:{internetLatency:null,ipv4:null,ipv6:null,publicIpv4:null},diskUsage:[],cpuLoad:[0,0],memoryLoad:[0,0],loading:!1,editNodeDialog:!1,inviteDialog:null,uses:null,generatingCode:!1,snackbar:!1,snackbarMsg:""}},mounted:function(){this.loading=!0,this.getCurrentIdentity()},computed:{latency:function(){return this.network.internetLatency&&-1!==this.network.internetLatency?"".concat(this.network.internetLatency," ms"):"Unknown"},cloudHost:function(){return"file://"!==window.location.origin&&"localhost"!==window.location.hostname},connectedPeople:function(){return this.invitedPeople.filter((function(t){return"pataka"!==t.type}))}},apollo:{network:{query:(0,l.ZP)(ge||(ge=(0,i.Z)(["query {\n        network {\n          ipv4\n          internetLatency\n          publicIpv4\n          portForwarding\n        }\n      }"]))),pollInterval:10*en},portForwarding:{query:(0,l.ZP)(me||(me=(0,i.Z)(["query {\n        network {\n          portForwarding\n        }\n      }"]))),update:function(t){return t.network.portForwarding}},cpuLoad:{query:(0,l.ZP)(ve||(ve=(0,i.Z)(["query {\n        cpuLoad\n      }"]))),pollInterval:10*en,update:function(t){return this.cpuLoad.length>=360||0===this.cpuLoad[this.cpuLoad.length-1]?this.cpuLoad.pop():0===this.cpuLoad[0]&&this.cpuLoad.shift(),[].concat((0,H.Z)(this.cpuLoad),[t.cpuLoad])}},memoryLoad:{query:(0,l.ZP)(be||(be=(0,i.Z)(["query {\n        memoryLoad\n      }"]))),pollInterval:10*en,update:function(t){return this.memoryLoad.length>=360?this.memoryLoad.pop():0===this.memoryLoad[0]&&this.memoryLoad.shift(),[].concat((0,H.Z)(this.memoryLoad),[t.memoryLoad])}},diskUsage:{query:(0,l.ZP)(ye||(ye=(0,i.Z)(["query {\n        diskUsage {\n          use\n          fs\n        }\n      }"]))),pollInterval:10*en},invitedPeople:{query:(0,l.ZP)(we||(we=(0,i.Z)(["query {\n        invitedPeople {\n          type\n          id\n          preferredName\n          avatarImage {\n            uri\n          }\n          ...on Person {\n            gender\n          }\n        }\n      }\n      "]))),pollInterval:5*en},tribes:{query:(0,l.ZP)(ke||(ke=(0,i.Z)(["query {\n        tribes {\n          public {\n            preferredName\n            avatarImage {\n              uri\n            }\n          }\n        }\n      }"]))),update:function(t){return t.tribes.filter((function(t){return t.public&&t.public[0]})).map((function(t){return t.public[0]}))},pollInterval:10*en}},methods:{getCurrentIdentity:function(){var t=this;return(0,o.Z)((0,r.Z)().mark((function e(){var n;return(0,r.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.$apollo.query({query:(0,l.ZP)(Ze||(Ze=(0,i.Z)(["\n          {\n            whoami {\n              public {\n                profile {\n                  id\n                  preferredName\n                  description\n                  avatarImage {\n                    uri\n                  }\n                }\n              }\n            }\n          }\n        "]))),fetchPolicy:"no-cache"});case 2:if(n=e.sent,!n.errors){e.next=8;break}throw t.loading=!1,n.errors;case 8:if(t.loading=!1,n.data.whoami.public.profile&&n.data.whoami.public.profile.preferredName){e.next=11;break}return e.abrupt("return",t.$router.push({name:"login"}));case 11:t.profile=(0,h.Z)((0,h.Z)({},n.data.whoami.public.profile),{},{feedId:n.data.whoami.public.feedId});case 12:case"end":return e.stop()}}),e)})))()},showSnackbar:function(t){this.snackbarMsg=t,this.snackbar=!0},clearSnackbar:function(){this.snackbarMsg="",this.snackbar=!1},logout:function(){this.$router.push("/")},toggleDialog:function(){this.generatedInvite&&(this.generatedInvite=null),this.dialog=!this.dialog},toggleEditDialog:function(){this.editNodeDialog=!this.editNodeDialog},toggleInviteDialog:function(){this.inviteDialog=!this.inviteDialog},generateInviteCode:function(t){var e=this;return(0,o.Z)((0,r.Z)().mark((function n(){var a,o,s,c;return(0,r.Z)().wrap((function(n){while(1)switch(n.prev=n.next){case 0:return a=t.ip,o=t.uses,e.generatingCode=!0,e.uses=o,s={uses:o},a&&(s.external=a),n.prev=5,n.next=8,e.$apollo.mutate({mutation:(0,l.ZP)(xe||(xe=(0,i.Z)(["\n              mutation ($input: createInviteInput) {\n                createInvite(input: $input)\n              }\n              "]))),variables:{input:(0,h.Z)({},s)}});case 8:c=n.sent,e.generateError=!1,e.dialog=!1,e.generatedInvite=c.data.createInvite,e.copyText="Copy",e.generatingCode=!1,n.next=22;break;case 16:throw n.prev=16,n.t0=n["catch"](5),console.error(n.t0),e.generatingCode=!1,e.generateError="something went wrong while trying to generate an invite code",n.t0;case 22:case"end":return n.stop()}}),n,null,[[5,16]])})))()},tryInvite:function(){var t=this;return(0,o.Z)((0,r.Z)().mark((function e(){return(0,r.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!t.portForwarding){e.next=3;break}return e.next=3,t.generateInviteCode(t.network.publicIpv4);case 3:case"end":return e.stop()}}),e)})))()},checkPortForwarding:function(){var t=this;return(0,o.Z)((0,r.Z)().mark((function e(){var n,a;return(0,r.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.checkingPort=!0,t.errorMsg=null,e.next=4,t.$apollo.query({query:(0,l.ZP)(_e||(_e=(0,i.Z)(["query {\n            network {\n              portForwarding\n            }\n          }"])))});case 4:if(n=e.sent,a=n.data.network.portForwarding,t.portForwarding=a,!a){e.next=13;break}return e.next=10,t.tryInvite();case 10:t.errorMsg=null,e.next=14;break;case 13:t.errorMsg="Port not open";case 14:t.checkingPort=!1;case 15:case"end":return e.stop()}}),e)})))()},copyCode:function(){var t=this;return(0,o.Z)((0,r.Z)().mark((function e(){return(0,r.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:navigator.clipboard.writeText(t.generatedInvite).then((function(){t.copyText="Copied"})).catch((function(t){console.error("Could not copy text: ",t)}));case 1:case"end":return e.stop()}}),e)})))()},save:function(t){var e=this;return(0,o.Z)((0,r.Z)().mark((function n(){var a,o;return(0,r.Z)().wrap((function(n){while(1)switch(n.prev=n.next){case 0:return e.loading=!0,a=tn()(t,"preferredName","description","avatarImage"),a.avatarImage&&delete a.avatarImage.uri,n.next=5,e.$apollo.mutate({mutation:(0,l.ZP)(Ce||(Ce=(0,i.Z)(["\n          mutation($input: PatakaProfileInput!) {\n            savePataka(input: $input)\n          }\n        "]))),variables:{input:(0,h.Z)({id:e.profile.id},a)}});case 5:o=n.sent,o.errors?console.error("failed to update profile",o):e.getCurrentIdentity();case 7:case"end":return n.stop()}}),n)})))()}},components:{Avatar:ot,AvatarGroup:dt,Meter:te,GenerateInviteDialog:Et,NewNodeDialog:Qe,SendInviteDialog:Ot,Snackbar:Vt}},an=nn,rn=(0,k.Z)(an,z,U,!1,null,null,null),on=rn.exports,sn=function(){var t=this,e=t._self._c;return e("div",{staticClass:"container"},[t.isLoading?e("div",{staticClass:"splash"},[e("img",{attrs:{src:n(9432)}}),e("h1",[t._v("Āhau Pātaka")])]):t._e(),t.isLoading||t.isSetup?!t.isLoading&&t.isSetup&&t.cloudHost?e("div",{staticClass:"welcome-text",staticStyle:{"justify-items":"center",display:"grid"}},[e(q.Z,{staticClass:"pb-12"},[e("p",{staticClass:"mb-0 headliner2",staticStyle:{color:"darkgrey"}},[t._v("enter password")])]),e(q.Z,{staticClass:"mt-10"},[e(N.Z,{attrs:{cols:"12"}},[e(ht.Z,{staticStyle:{"background-color":"#303030",width:"300px"},attrs:{label:"Password",outlined:"",width:"150px",type:"password","error-messages":t.passwordRules},on:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.checkPassword.apply(null,arguments)}},model:{value:t.passwordInput,callback:function(e){t.passwordInput=e},expression:"passwordInput"}})],1)],1),e(q.Z,[e($.Z,{staticStyle:{"border-color":"#b12526","background-color":"#303030"},attrs:{text:"",color:"#b12526",outlined:""},on:{click:function(e){return e.preventDefault(),t.checkPassword.apply(null,arguments)}}},[e("p",{staticClass:"login-text mb-0"},[t._v("submit")])])],1)],1):t._e():e("div",{staticClass:"welcome-text",staticStyle:{"justify-items":"center",display:"grid"}},[e(q.Z,[e("p",{staticClass:"mb-0 headliner"},[t._v("Nau mai")])]),e(q.Z,[e("p",{staticClass:"mb-0 headliner"},[t._v("Whakatau mai")])]),e(q.Z,{staticClass:"pb-12"},[e("p",{staticClass:"mb-0 headliner2",staticStyle:{color:"darkgrey"}},[t._v("welcome")])]),e(q.Z,{staticClass:"mt-10"},[e($.Z,{staticStyle:{"border-color":"#b12526","background-color":"#303030"},attrs:{text:"","x-large":"",color:"#b12526",outlined:""},on:{click:function(e){return e.preventDefault(),t.toggleNew.apply(null,arguments)}}},[e("p",{staticClass:"login-text mb-0"},[t._v("create pataka")])])],1)],1),t.dialog?e("NewNodeDialog",{attrs:{show:t.dialog,title:"Āhau Pātaka"},on:{close:t.toggleNew,save:function(e){return t.save(e)}}}):t._e()],1)},ln=[],cn=n(2418),un=n.n(cn),pn="\n---------------------------------\nE te tangata\nWhāia te māutauranga kai mārama\nKia whai take ngā mahi katoa\nTū māia, tū kaha\nAroha atu, aroha mai\nTātou i a tātou katoa\n\nFor this person\nSeek knowledge for understanding\nHave purpose in all that you do\nStand tall, be strong\nLets us all show respect\nFor each other\n---------------------------------\n",dn={data:function(){return{isLoading:!0,isSetup:!1,profile:{id:null,preferredName:null,avatarImage:null},dialog:!1,passwordInput:"",passwordError:!1,passwordRules:[]}},computed:{cloudHost:function(){return"file://"!==window.location.origin&&"localhost"!==window.location.hostname}},mounted:function(){this.getCurrentIdentity()},methods:{createPassword:function(){var t=this;return(0,o.Z)((0,r.Z)().mark((function e(){return(0,r.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,un().hash(t.passwordInput,10,(function(t,e){t?console.log("error encrypting password: ",t):console.log("hash: ",e)}));case 2:case"end":return e.stop()}}),e)})))()},checkPassword:function(){var t=this;un().compare(this.passwordInput,Se).then((function(e){e?(t.karakiaTūwhera(),t.$router.push({name:"dashboard"})):t.passwordRules.push("Password incorrect. Try again")}))},getCurrentIdentity:function(){var t=this;return(0,o.Z)((0,r.Z)().mark((function e(){var n;return(0,r.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.$apollo.query({query:(0,l.ZP)(Pe||(Pe=(0,i.Z)(["\n          {\n            whoami {\n              public {\n                profile {\n                  id\n                  preferredName\n                  avatarImage {\n                    uri\n                  }\n                }\n              }\n            }\n          }\n        "]))),fetchPolicy:"no-cache"});case 2:if(n=e.sent,!n.errors){e.next=5;break}throw n.errors;case 5:n.data.whoami.public.profile&&(t.profile=n.data.whoami.public.profile),t.proceed();case 7:case"end":return e.stop()}}),e)})))()},"karakiaTūwhera":function(){console.log(pn)},proceed:function(){if(this.$apollo.loading||!this.profile.id)return console.log("waiting for apollo"),void setTimeout(this.proceed,300);this.isSetup=Boolean(this.profile.preferredName),this.isSetup&&!this.cloudHost&&(this.karakiaTūwhera(),this.$router.push({name:"dashboard"})),this.isLoading=!1},toggleNew:function(){this.dialog=!this.dialog},save:function(t){var e=this;return(0,o.Z)((0,r.Z)().mark((function n(){var a,o;return(0,r.Z)().wrap((function(n){while(1)switch(n.prev=n.next){case 0:return a=tn()(t,"preferredName","description","avatarImage"),a.avatarImage&&delete a.avatarImage.uri,n.next=4,e.$apollo.mutate({mutation:(0,l.ZP)(Ie||(Ie=(0,i.Z)(["\n          mutation($input: PatakaProfileInput!) {\n            savePataka(input: $input)\n          }\n        "]))),variables:{input:(0,h.Z)({id:e.profile.id},a)}});case 4:if(o=n.sent,!o.errors){n.next=8;break}return console.error("failed to update profile",o),n.abrupt("return");case 8:e.getCurrentIdentity();case 9:case"end":return n.stop()}}),n)})))()}},components:{NewNodeDialog:Qe}},fn=dn,hn=(0,k.Z)(fn,sn,ln,!1,null,"7f7d691c",null),gn=hn.exports;s.ZP.use(B.ZP);var mn=new B.ZP({mode:"history",routes:[{path:"/",redirect:"/login"},{path:"/login",name:"login",component:gn},{path:"/logout",redirect:"/login"},{path:"/dashboard",name:"dashboard",component:on},{path:"*",redirect:"/"}]}),vn=n(6486),bn=n(8891),yn=n.n(bn),wn={NODE_ENV:"production",VUE_APP_MIXPANEL_TOKEN:"34c9aa7a76fedf7e4bd6f6e1d118a251",VUE_APP_MIXPANEL_API_HOST:"https://api-eu.mixpanel.com",VUE_APP_PLATFORM:"web",BASE_URL:""},kn=wn.VUE_APP_MIXPANEL_TOKEN,Zn=wn.VUE_APP_MIXPANEL_API_HOST,xn=void 0===Zn?"https://api-eu.mixpanel.com":Zn,_n=1e3,Cn=60*_n,Pn=60*Cn,In=1*Pn,Sn={track:function(){}};Sn.throttledTrack=(0,vn.throttle)(Sn.track,In);var Dn={};function An(){return window.ahoy?(yn().init(kn,{api_host:xn}),window.ahoy.getConfig().then((function(t){var e=t.mixpanelId;yn().identify(e),yn().people.set({application:"ahau",isPataka:!0,isMobile:!1,userId:e}),yn().throttledTrack=function(t){Dn[t]||(Dn[t]=(0,vn.throttle)(yn().track,In,{trailing:!1}).bind(yn(),t));for(var e=arguments.length,n=new Array(e>1?e-1:0),a=1;a<e;a++)n[a-1]=arguments[a];return Dn[t].apply(Dn,n)}})),yn()):(console.log("(analytics) window.ahoy not found - this is only accessible in electron"),Sn)}var Ln=An(),En=n(9876).version,Bn={},$n={},Nn={},Tn={patakaPing:function(t){t.state,t.commit;Ln.throttledTrack("pataka-ping",{version:En})}},Fn={namespaced:!0,state:Bn,getters:$n,mutations:Nn,actions:Tn};s.ZP.use(g.ZP);var Mn={state:{},getters:{},mutations:{},actions:{}},On=new g.ZP.Store((0,h.Z)((0,h.Z)({},Mn),{},{modules:{analytics:Fn}})),jn=n(2489),qn=n(692),zn=JSON.parse('{"__schema":{"types":[{"name":"Blob","kind":"INTERFACE","possibleTypes":[{"name":"BlobScuttlebutt","description":"Blobs of the ssb-blobs variety"},{"name":"BlobHyper","description":"Blobs of the ssb-hyper-blobs variety"}]},{"name":"_Entity","kind":"UNION","possibleTypes":[{"name":"CurrentIdentity","description":"Secure Scuttlebutt current identity"},{"name":"PublicIdentity","description":null},{"name":"PersonalIdentity","description":null},{"name":"Peer","description":"Secure Scuttlebutt replication peer"}]},{"name":"Profile","kind":"INTERFACE","possibleTypes":[{"name":"Person","description":"Person fields used by ssb-profile plugin"},{"name":"Pataka","description":null},{"name":"Community","description":"Community profile (fields from ssb-profile plugin)"}]}]}}'),Un=n(5926)();function Hn(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=new URL(window.location.origin);e.port=Un.pataka.graphql.port,e.pathname="/graphql";var n=new qn.Z(e.href,(0,h.Z)({possibleTypes:zn},t)),a=new jn.ZP({defaultClient:n,defaultOptions:{$query:{}},errorHandler:function(t){console.log("%cError","background: red; color: white; padding: 2px 4px; border-radius: 3px; font-weight: bold;",t.message)}});return a}s.ZP.use(jn.ZP);Hn();var Rn=n(2250),Vn="#bfbfbf",Gn="#427979",Wn={theme:{dark:!0,themes:{dark:{primary:"#383838",secondary:"#A80000",accent:"#A70000",error:"#ff0000",alive:Gn,deceased:Vn}},options:{customProperties:!0}},icons:{iconfont:"mdi"}};s.ZP.use(Rn.Z);var Xn,Kn=new Rn.Z(Wn);function Jn(){return Qn.apply(this,arguments)}function Qn(){return Qn=(0,o.Z)((0,r.Z)().mark((function t(){var e,n,a;return(0,r.Z)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:a=function(){return a=(0,o.Z)((0,r.Z)().mark((function t(a){return(0,r.Z)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e.defaultClient.query({query:(0,l.ZP)(Xn||(Xn=(0,i.Z)(["{\n          whoami {\n            public {\n              feedId\n            }\n          }\n        }"])))});case 3:t.next=9;break;case 5:return t.prev=5,t.t0=t["catch"](0),console.log("Waiting for Graphql"),t.abrupt("return",setTimeout((function(){return n(a)}),500));case 9:a();case 10:case"end":return t.stop()}}),t,null,[[0,5]])}))),a.apply(this,arguments)},n=function(t){return a.apply(this,arguments)},s.ZP.use(c.ZP),s.ZP.config.productionTip=!1,e=Hn(),n((function(){new s.ZP({router:mn,store:On,apolloProvider:e,vuetify:Kn,render:function(t){return t(E)}}).$mount("#app")}));case 6:case"end":return t.stop()}}),t)}))),Qn.apply(this,arguments)}Jn()},9432:function(t,e,n){"use strict";t.exports=n.p+"img/logo_red.d388862f.svg"},5995:function(){},9876:function(t){"use strict";t.exports=JSON.parse('{"name":"pataka","version":"4.1.0","description":"A pub application for the Ahau ecosystem. Built using scuttlebutt","homepage":"https://gitlab.com/ahau/pataka","scripts":{"postinstall":"electron-builder install-app-deps && cd ui && npm i","start":"electron index.js -- --title Pātaka","dev":"cross-env NODE_ENV=development DEV_SERVER_PORT=8081 electron index.js -- --title Pātaka","serve":"cd ui && npm run dev","build:ui":"cd ui && npm run build","build:icons":"node build/build-icons.js","pack":"electron-builder --config build/electron-builder.config.js --dir","dist":"electron-builder --config build/electron-builder.config.js","publish":"electron-builder --config build/electron-builder.config.js --publish always","move-release":"rimraf releases && mvy dist/installers releases","release":"npm run build:ui && npm run publish && npm run move-release","lint":"cd ui && npm run lint"},"dependencies":{"ahau-env":"^3.0.0","boxen":"^5.1.2","chalk":"^4.1.2","electron-updater":"^4.6.5","env-paths":"^2.2.1","lodash.merge":"^4.6.2","secret-stack":"^6.4.1","ssb-ahoy":"^5.0.1","ssb-backlinks":"^2.1.1","ssb-blobs":"^2.0.0","ssb-config":"^3.4.6","ssb-conn":"^1.0.0","ssb-db":"^20.4.1","ssb-friends":"^4.4.8","ssb-hyper-blobs":"^3.0.0","ssb-invite":"^3.0.1","ssb-lan":"^1.2.3","ssb-master":"^1.0.3","ssb-no-auth":"^1.0.0","ssb-pataka":"^5.1.0","ssb-profile":"^5.15.0","ssb-query":"^2.4.5","ssb-recps-guard":"^2.1.0","ssb-replicate":"^1.3.3","ssb-serve-blobs":"^3.1.2","ssb-settings":"^1.1.4","ssb-tribes":"^3.1.2","ssb-unix-socket":"^1.0.0"},"devDependencies":{"cross-env":"^7.0.2","electron-notarize":"^1.2.2","esm":"^3.2.25","mvy":"^0.2.1","rimraf":"^2.7.1","typescript":"^3.9.6"},"engines":{"node":">=18"},"author":"Āhau Ltd.","repository":{"type":"git","url":"git+https://gitlab.com/ahau/pataka.git"},"license":"AGPL-3.0"}')}},e={};function n(a){var r=e[a];if(void 0!==r)return r.exports;var i=e[a]={id:a,loaded:!1,exports:{}};return t[a].call(i.exports,i,i.exports,n),i.loaded=!0,i.exports}n.m=t,function(){var t=[];n.O=function(e,a,r,i){if(!a){var o=1/0;for(u=0;u<t.length;u++){a=t[u][0],r=t[u][1],i=t[u][2];for(var s=!0,l=0;l<a.length;l++)(!1&i||o>=i)&&Object.keys(n.O).every((function(t){return n.O[t](a[l])}))?a.splice(l--,1):(s=!1,i<o&&(o=i));if(s){t.splice(u--,1);var c=r();void 0!==c&&(e=c)}}return e}i=i||0;for(var u=t.length;u>0&&t[u-1][2]>i;u--)t[u]=t[u-1];t[u]=[a,r,i]}}(),function(){n.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return n.d(e,{a:e}),e}}(),function(){n.d=function(t,e){for(var a in e)n.o(e,a)&&!n.o(t,a)&&Object.defineProperty(t,a,{enumerable:!0,get:e[a]})}}(),function(){n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"===typeof window)return window}}()}(),function(){n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)}}(),function(){n.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})}}(),function(){n.nmd=function(t){return t.paths=[],t.children||(t.children=[]),t}}(),function(){n.p=""}(),function(){var t={143:0};n.O.j=function(e){return 0===t[e]};var e=function(e,a){var r,i,o=a[0],s=a[1],l=a[2],c=0;if(o.some((function(e){return 0!==t[e]}))){for(r in s)n.o(s,r)&&(n.m[r]=s[r]);if(l)var u=l(n)}for(e&&e(a);c<o.length;c++)i=o[c],n.o(t,i)&&t[i]&&t[i][0](),t[i]=0;return n.O(u)},a=self["webpackChunkpataka_ui"]=self["webpackChunkpataka_ui"]||[];a.forEach(e.bind(null,0)),a.push=e.bind(null,a.push.bind(a))}();var a=n.O(void 0,[998],(function(){return n(4017)}));a=n.O(a)})();
//# sourceMappingURL=app-legacy.3bd0c2a6.js.map