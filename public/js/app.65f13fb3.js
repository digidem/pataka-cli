(function(t){function e(e){for(var n,i,s=e[0],c=e[1],l=e[2],p=0,d=[];p<s.length;p++)i=s[p],Object.prototype.hasOwnProperty.call(a,i)&&a[i]&&d.push(a[i][0]),a[i]=0;for(n in c)Object.prototype.hasOwnProperty.call(c,n)&&(t[n]=c[n]);u&&u(e);while(d.length)d.shift()();return o.push.apply(o,l||[]),r()}function r(){for(var t,e=0;e<o.length;e++){for(var r=o[e],n=!0,s=1;s<r.length;s++){var c=r[s];0!==a[c]&&(n=!1)}n&&(o.splice(e--,1),t=i(i.s=r[0]))}return t}var n={},a={app:0},o=[];function i(e){if(n[e])return n[e].exports;var r=n[e]={i:e,l:!1,exports:{}};return t[e].call(r.exports,r,r.exports,i),r.l=!0,r.exports}i.m=t,i.c=n,i.d=function(t,e,r){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},i.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(i.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)i.d(r,n,function(e){return t[e]}.bind(null,n));return r},i.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="";var s=window["webpackJsonp"]=window["webpackJsonp"]||[],c=s.push.bind(s);s.push=e,s=s.slice();for(var l=0;l<s.length;l++)e(s[l]);var u=c;o.push([0,"chunk-vendors"]),r()})({0:function(t,e,r){t.exports=r("56d7")},"099e":function(t,e,r){},"09c9":function(t,e,r){t.exports=r.p+"img/diverse.4cebada7.svg"},"0ddb":function(t,e,r){t.exports=r.p+"img/logo_red.ada09894.svg"},1:function(t,e){},10:function(t,e){},11:function(t,e){},12:function(t,e){},"122d":function(t,e,r){"use strict";r("25bc")},13:function(t,e){},14:function(t,e){},2:function(t,e){},"25bc":function(t,e,r){},3:function(t,e){},"33fd":function(t,e,r){"use strict";r("fed5")},"39ad":function(t,e,r){},"3b34":function(t,e,r){t.exports=r.p+"img/tane.da4e175f.svg"},"3ebb":function(t,e,r){"use strict";r("e46f")},4:function(t,e){},"40fd":function(t){t.exports=JSON.parse('{"name":"pataka","version":"3.1.2","description":"A pub application for the Ahau ecosystem. Built using scuttlebutt","homepage":"https://gitlab.com/ahau/pataka","scripts":{"postinstall":"electron-builder install-app-deps && cd ui && npm i","start":"electron index.js -- --title Pātaka","dev":"cross-env NODE_ENV=development electron index.js -- --title Pātaka","serve":"cd ui && npm run dev","build:ui":"cd ui && npm run build","build:icons":"node build/build-icons.js","pack":"electron-builder --config build/electron-builder.config.js --dir","dist":"electron-builder --config build/electron-builder.config.js","publish":"electron-builder --config build/electron-builder.config.js --publish always","move-release":"rimraf releases && mvy dist/installers releases","release":"npm run build:ui && npm run publish && npm run move-release","lint":"cd ui && npm run lint"},"dependencies":{"ahau-env":"^3.0.0","bcryptjs":"^2.4.3","electron-updater":"^4.3.8","env-paths":"^2.2.1","lodash.merge":"^4.6.2","secret-stack":"^6.4.0","ssb-ahoy":"^4.1.2","ssb-backlinks":"^2.1.1","ssb-blobs":"^2.0.0","ssb-config":"^3.4.5","ssb-conn":"^1.0.0","ssb-db":"^20.3.0","ssb-friends":"~4.2.1","ssb-hyper-blobs":"^2.1.1","ssb-invite":"^2.1.7","ssb-lan":"^1.0.0","ssb-master":"^1.0.3","ssb-no-auth":"^1.0.0","ssb-pataka":"^4.2.0","ssb-profile":"^3.1.0","ssb-query":"^2.4.5","ssb-recps-guard":"^2.1.0","ssb-replicate":"^1.3.3","ssb-serve-blobs":"^2.5.0","ssb-settings":"^1.1.4","ssb-tribes":"^2.1.0","ssb-unix-socket":"^1.0.0"},"devDependencies":{"@fiahfy/icns-convert":"0.0.8","cross-env":"^7.0.2","electron-builder":"22.10.5","electron-notarize":"^1.1.0","esm":"^3.2.25","mvy":"^0.2.1","rimraf":"^2.7.1","sharp":"0.23.4","to-ico":"^1.1.5","typescript":"^3.9.6"},"author":"Āhau Ltd.","repository":{"type":"git","url":"git+https://gitlab.com/ahau/pataka.git"},"license":"AGPL-3.0"}')},"44db":function(t,e,r){"use strict";r("a03d")},"4e74":function(t,e,r){"use strict";r("39ad")},5:function(t,e){},"56d7":function(t,e,r){"use strict";r.r(e);var n=r("8785"),a=(r("96cf"),r("1da1")),o=(r("cadf"),r("551c"),r("f751"),r("097d"),r("2b0e")),i=r("9530"),s=r.n(i),c=r("56dd"),l=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("v-app",[t.displayAppbar?r("Appbar"):t._e(),r("v-main",[r("router-view")],1),r("div",{staticClass:"version"},[r("span",[t._v("version")]),t._v(" "+t._s(t.version)+"\n  ")])],1)},u=[],p=(r("8e6e"),r("ac6a"),r("456d"),r("7f7f"),r("ade3")),d=r("2f62"),f=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("v-app-bar",{attrs:{color:"#303030",flat:""}},[n("router-link",{staticClass:"logo-link",attrs:{to:"/"}},[n("img",{staticClass:"logo",attrs:{src:r("0ddb")}})])],1)],1)},v=[],h={name:"Appbar"},m=h,b=(r("4e74"),r("2877")),g=r("6544"),y=r.n(g),w=r("40dc"),k=Object(b["a"])(m,f,v,!1,null,"46c267e9",null),x=k.exports;function _(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function O(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?_(Object(r),!0).forEach((function(e){Object(p["a"])(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):_(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}y()(k,{VAppBar:w["a"]});var C,P=r("40fd"),j=P.version,I=Object(d["a"])("analytics"),S=I.mapActions,E=6e4,A={name:"App",data:function(){return{version:j}},methods:O({},S(["patakaPing"])),created:function(){C||(this.patakaPing(),C=setInterval(this.patakaPing,10*E))},computed:{displayAppbar:function(){return"login"!==this.$route.name}},watch:{"$route.name":{handler:function(t,e){void 0!==e&&document.body.classList.remove("page--"+e.toLowerCase()),document.body.classList.add("page--"+t.toLowerCase())},immediate:!0}},components:{Appbar:x}},D=A,V=(r("5c0b"),r("7496")),L=r("f6c4"),$=Object(b["a"])(D,l,u,!1,null,null,null),B=$.exports;y()($,{VApp:V["a"],VMain:L["a"]});var T=r("8c4f"),F=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"wrapper"},[r("v-container",{staticClass:"px-12",attrs:{fluid:""}},[r("v-row",{attrs:{justify:"center"}},[r("v-col",{staticClass:"pt-0",attrs:{cols:"4"}},[r("Avatar",{staticClass:"pb-4",attrs:{size:"180px",type:"pataka",alt:t.profile.preferredName,image:t.profile.avatarImage}}),r("h1",{staticClass:"text-uppercase text-center"},[t._v(t._s(t.profile.preferredName))]),r("p",{staticClass:"grey--text text-center caption overflow-wrap"},[t._v(t._s(t.profile.feedId))]),r("v-col",{staticClass:"mx-auto mt-8",attrs:{cols:"7"}},[r("v-row",{staticClass:"py-2",attrs:{justify:"start",align:"center"}},[r("div",{staticClass:"dot mr-4 internet-dot",class:t.network.internetLatency?-1===t.network.internetLatency?"red":"green":"grey"}),r("p",{staticClass:"caption text-uppercase text-center ma-0"},[t._v("\n              "+t._s(t.network.internetLatency?-1===t.network.internetLatency?"Offline":"Online":"Checking")+"\n            ")]),r("span",{staticClass:"network-latency"},[t._v(t._s(t.latency))])]),r("v-row",{staticClass:"py-2 network-local",attrs:{justify:"start",align:"center"}},[r("div",{staticClass:"dot mr-4",class:t.network.ipv4?"green":"grey"}),r("p",{staticClass:"caption text-uppercase ma-0"},[t._v("\n              "+t._s(t.network.ipv4?" Local Network":"Checking")+"\n            ")])]),r("v-row",{staticClass:"py-2",attrs:{justify:"start",align:"center"}},[r("div",{staticClass:"dot mr-4",class:t.network.portForwarding?"green":null===t.network.internetLatency?"grey":"orange"}),r("p",{staticClass:"caption text-uppercase text-center ma-0"},[t._v("\n              "+t._s(t.network.portForwarding?"Port-Forwarding":null===t.network.portForwarding?"Checking":"Port-Forwarding Off")+"\n            ")])]),r("v-row",{staticClass:"mt-8",attrs:{justify:"center"}},[r("h2",{staticStyle:{"text-align":"center"}},[t._v("Disk Usage")]),t._l(t.diskUsage,(function(e){return r("v-progress-linear",{key:e.fs,staticClass:"mt-4",attrs:{value:e.use,height:"25",color:"blue-grey"}},[r("strong",{staticClass:"pr-2"},[t._v(t._s(Math.ceil(e.use))+"%")]),r("span",{staticClass:"caption"},[t._v(t._s(e.fs))])])}))],2),t.cloudHost?r("v-row",{attrs:{align:"center"}},[r("v-btn",{staticClass:"mt-6",attrs:{width:"100%",color:"red",outlined:""},on:{click:t.logout}},[t._v("\n              logout\n            ")])],1):t._e()],1)],1),r("v-col",{attrs:{cols:"8"}},[r("v-row",[r("v-col",{attrs:{cols:"12"}},[r("v-btn",{attrs:{color:"#53cb62",outlined:"",disabled:null===t.network.portForwarding},on:{click:function(e){return t.toggleDialog()}}},[t._v("\n              "+t._s(t.network.ipv4?"Generate join code":"Loading network data")+"\n            ")])],1),t.generateError?r("v-col",[r("p",{staticClass:"red--text caption mb-0"},[t._v(t._s(t.generateError))])]):t.generatedInvite?r("v-col",{staticClass:"generated-code pl-6",attrs:{cols:"12"}},[r("v-row",[r("p",{staticClass:"overline pt-2"},[t._v("Pātaka code:")])]),r("v-row",[r("p",{staticClass:"pa-2",attrs:{id:"invite-code"}},[t._v(t._s(t.generatedInvite))])]),t.cloudHost?t._e():r("v-row",[r("v-btn",{staticClass:"text-uppercase",attrs:{color:"grey",outlined:"",justify:"end"},on:{click:t.copyCode}},["Copy"===t.copyText?r("v-icon",{attrs:{small:"",left:""}},[t._v("mdi-content-copy")]):r("v-icon",{attrs:{small:"",left:""}},[t._v("mdi-check")]),t._v("\n                "+t._s(t.copyText)+"\n              ")],1)],1)],1):t._e()],1),r("v-row",{staticClass:"stat-column"},[r("v-col",{attrs:{cols:"6"}},[r("Meter",{attrs:{title:"CPU",values:t.cpuLoad}})],1),r("v-col",{attrs:{cols:"6"}},[r("Meter",{attrs:{title:"RAM",values:t.memoryLoad}})],1)],1),r("v-row",{staticClass:"pt-6"},[r("v-col",{staticClass:"stat-column",attrs:{cols:"6"}},[r("h2",{staticClass:"h2 text-uppercase pb-8"},[t._v("People")]),0===t.invitedPeople.length?r("p",{staticClass:"caption"},[t._v("There is no one connected to your network")]):t._e(),r("v-row",{staticClass:"pb-2"},[t.invitedPeople&&t.invitedPeople.length>0?r("div",[r("AvatarGroup",{attrs:{profiles:t.invitedPeople,size:"60px",showLabel:""}})],1):t._e()])],1),r("v-col",{staticClass:"stat-column pl-6",attrs:{cols:"6"}},[r("h2",{staticClass:"h2 text-uppercase pb-8"},[t._v("Tribes")]),0===t.tribes.length?r("p",{staticClass:"caption"},[t._v("There are no tribes on your network")]):t._e(),r("v-row",{staticClass:"pb-2"},[t.tribes&&t.tribes.length>0?r("div",[r("AvatarGroup",{attrs:{profiles:t.tribes,size:"60px",showLabel:""}})],1):t._e()])],1)],1)],1)],1)],1),t.dialog?r("GenerateInviteDialog",{attrs:{show:t.dialog,publicIpv4:t.network.publicIpv4,portForwarding:t.network.portForwarding,checkPortForwarding:t.checkPortForwarding,checkingPort:t.checkingPort,title:"Generate Invite Code",errorMsg:t.errorMsg,cloudHost:t.cloudHost},on:{close:t.toggleDialog,generate:function(e){return t.generateInviteCode(e)}}}):t._e()],1)},R=[],N=r("2909"),M=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",[r("v-col",[r("v-row",{attrs:{justify:"center"}},[r("v-hover",{scopedSlots:t._u([{key:"default",fn:function(e){var n=e.hover;return[r("v-avatar",{staticClass:"avatar-container",class:{isEditing:t.isEditing},attrs:{size:t.size,tile:t.tile,dark:t.dark}},[t.image&&t.image.uri?r("v-img",{attrs:{src:t.hackURL(t.image.uri),alt:t.alt}}):r("v-img",{staticClass:"no-pic",style:t.customStyle,attrs:{src:t.getImage}}),r("v-overlay",{attrs:{absolute:"",opacity:"0.5",value:n&&t.showLabel}},[r("p",{staticClass:"text-center pt-2",staticStyle:{"font-size":"12px"}},[t._v(t._s(t.alt))])])],1)]}}])})],1)],1)],1)},q=[],U=r("3b34"),z=r.n(U),H=r("d440"),G=r.n(H),W=r("09c9"),X=r.n(W),J=r("c853"),K=r.n(J),Y={defaultImage:Q};function Q(t,e){switch(t){case"person":switch(e){case"male":return z.a;case"female":return G.a;case"other":case"unknown":default:return X.a}case"pataka":case"whakapapa":default:return K.a}}var Z={name:"Avatar",props:{showOnHover:Boolean,image:Object,alt:String,gender:String,type:{type:String,default:"person"},size:{type:String,default:"25vh"},showLabel:{type:Boolean,default:!1},clickable:{type:Boolean,default:!1},isEditing:{type:Boolean,default:!1},offline:{type:Boolean,default:!1},dark:Boolean,tile:Boolean},data:function(){return{hovered:!1}},computed:{getImage:function(){return Y.defaultImage(this.type,this.gender||null)},customStyle:function(){return{opacity:this.offline?.5:1}}},components:{},methods:{hackURL:function(t){var e=new URL(t);return e.hostname=window.location.hostname,e.href},updateAvatar:function(t){this.$emit("updateAvatar",t)}}},tt=Z,et=(r("44db"),r("8212")),rt=r("62ad"),nt=r("ce87"),at=r("adda"),ot=r("a797"),it=r("0fd9"),st=Object(b["a"])(tt,M,q,!1,null,"4a4637f6",null),ct=st.exports;y()(st,{VAvatar:et["a"],VCol:rt["a"],VHover:nt["a"],VImg:at["a"],VOverlay:ot["a"],VRow:it["a"]});var lt=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("v-col",{staticClass:"pt-0 pb-0"},[t.groupTitle?r("v-row",[r("v-col",{staticClass:"pt-1 pb-0"},[r("small",{staticClass:"label overline"},[t._v(" "+t._s(t.groupTitle)+" ")])])],1):t._e(),r("v-row",{class:t.customClass},[t._l(t.profiles,(function(e,n){return r("div",{key:t.groupTitle+"-"+n,class:t.spacing,attrs:{width:"100%"}},[r("div",{staticClass:"pt-2",attrs:{justify:"center"}},[r("Avatar",{attrs:{size:t.size,isEditing:!1,type:e.type,image:e.avatarImage,alt:e.preferredName,gender:e.gender,showLabel:t.showLabels,clickable:t.clickable,deletable:t.deletable,dark:t.dark,row:t.row,tile:t.tile},on:{click:function(r){return t.profileClick(e)},delete:function(e){return t.$emit("delete",n)}}})],1)])})),t._t("action")],2)],1)},ut=[],pt={name:"AvatarGroup",components:{Avatar:ct},props:{profiles:{type:Array,default:null},groupTitle:{type:String,default:null},showLabels:{type:Boolean,default:!0},size:{type:String,default:"80px"},customClass:{type:String,default:"d-flex justify-start align-center pa-2 pl-4"},spacing:{type:String,default:"pr-5"},deletable:Boolean,tile:Boolean,clickable:{type:Boolean,default:!0},dark:Boolean,row:Boolean},computed:{columns:function(){return this.profiles.length}},methods:{profileClick:function(t){this.$emit("profile-click",t)}}},dt=pt,ft=(r("9302"),Object(b["a"])(dt,lt,ut,!1,null,"698b1b22",null)),vt=ft.exports;y()(ft,{VCol:rt["a"],VRow:it["a"]});var ht=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("Dialog",{attrs:{show:t.show,title:t.title,width:"720px",goBack:t.close,enableMenu:""},on:{close:t.close},scopedSlots:t._u([{key:"content",fn:function(){return[r("v-col",{staticClass:"py-0",staticStyle:{color:"black"}},[r("v-row",[r("v-col",{attrs:{cols:"6"}},[r("v-text-field",{attrs:{"error-messages":t.errorMsg,label:"This machines public IP",outlined:""},model:{value:t.ip,callback:function(e){t.ip=e},expression:"ip"}})],1),r("v-col",{staticClass:"mt-4"},[r("v-row",{staticClass:"py-2",attrs:{justify:"start",align:"center"}},[r("div",{staticClass:"dot mr-4",class:t.portForwarding?"green":"orange"}),r("p",{staticClass:"caption text-uppercase text-center ma-0"},[t._v("\n              "+t._s(t.portForwarding?"Port-Forwarding":null===t.portForwarding?"Checking":"Port-Forwarding Off")+"\n            ")])])],1)],1),t.portForwarding?t._e():r("div",[r("p",[t._v("Our portfordward checks indicate that you have not setup portforwarding.")]),r("p",[t._v("\n          In order for others to connect to this Pātaka over the Internet you'll need to enable\n          "),r("a",{attrs:{href:"https://en.wikipedia.org/wiki/Port_forwarding",target:"_blank"}},[t._v("Port-Forwarding")]),t._v(" on your router.\n        ")]),r("p",[t._v("Depending on your router, our portfordwarding checks maybe by inaccurate. If you believe you have correctly setup port forwarding then we recommend that you test generating a code using your internet connection")]),r("p",[t._v("Alternatively you can also connect locally without the internet via wifi. If you want to do this then please select use local network")])]),r("v-row",[r("v-col",[r("p",{staticClass:"overline"},[t._v("Select number of uses")]),r("v-select",{staticStyle:{"max-width":"300px"},attrs:{items:["single use","100 uses","1,000 uses","100,000 uses"],outlined:"",placeholder:"single use","persistent-placeholder":"",autofocus:""},model:{value:t.value,callback:function(e){t.value=e},expression:"value"}})],1),r("v-col",[r("p",{staticClass:"overline"},[t._v("Select connection")]),r("v-select",{staticStyle:{"max-width":"300px"},attrs:{items:["Connect globally over internet","Connect locally over wifi"],outlined:"",placeholder:t.portForwarding?"connect globally over internet":"connect locally over wifi","persistent-placeholder":"",readonly:t.portForwarding,autofocus:""},model:{value:t.type,callback:function(e){t.type=e},expression:"type"}})],1)],1)],1)]},proxy:!0},{key:"actions",fn:function(){return[r("div",[r("v-btn",{staticClass:"primary--text my-2",attrs:{text:"",large:""},on:{click:function(e){return t.submit()}}},[t._v("Generate code")])],1)]},proxy:!0}])})},mt=[],bt=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("v-dialog",{attrs:{"max-width":t.width,light:!t.dark,fullscreen:t.mobile,transition:t.mobile?"dialog-bottom-transition":"scale-transition"},on:{input:t.close},model:{value:t.showDialog,callback:function(e){t.showDialog=e},expression:"showDialog"}},[r("v-card",[r("v-app-bar",{attrs:{color:"#292929",dark:!t.dark,src:t.banner,flat:"",dense:"",height:"60px","max-height":"60px"},scopedSlots:t._u([{key:"img",fn:function(e){var n=e.props;return[r("v-img",t._b({staticStyle:{opacity:"40%",left:"100px"}},"v-img",n,!1))]}}])},[t.mobile?r("v-btn",{attrs:{icon:""},on:{click:t.closeDialog}},[r("v-icon",[t._v("mdi-arrow-left")])],1):t._e(),t.mobile?r("v-spacer",{staticStyle:{"min-width":"10%"}}):t._e(),r("div",{staticClass:"dialog-title text-uppercase",style:t.mobile?"text-align:end":""},[r("span",{staticStyle:{color:"#BA041B"}},[t._v(t._s(t.splitTitle.maori))]),r("span",[t._v(t._s(t.splitTitle.english))])]),t.mobile?t._e():r("v-spacer"),t.mobile?t._e():r("v-btn",{attrs:{icon:""},on:{click:t.closeDialog}},[r("v-icon",[t._v("mdi-close")])],1)],1),r("v-card-text",{staticClass:"pa-3 pb-0",style:t.mobile?"overflow-x: hidden;":"max-height: 650px; overflow-x: hidden;"},[t._t("content")],2),r("v-divider"),t.readonly?t._e():r("v-card-actions",{staticClass:"pa-0"},[r("v-container",{staticClass:"py-0"},[r("v-row",{staticClass:"ma-0",attrs:{align:"end"}},[t.$slots["before-actions"]?r("v-col",{staticClass:"py-0",attrs:{cols:"12",md:"auto",align:t.mobile?"center":"start"}},[t._t("before-actions")],2):t._e(),t.mobile?t._e():r("v-spacer"),t._t("actions",[r("v-col",{attrs:{cols:"6",md:"auto",align:"center"}},[r("v-btn",{staticClass:"secondary--text",attrs:{text:"",large:!t.mobile},on:{click:t.close}},[t._v("\n                Cancel\n              ")])],1),r("v-col",{attrs:{cols:"6",md:"auto",align:"center"}},[r("v-btn",{attrs:{large:!t.mobile,text:"",color:"blue"},on:{click:t.submit}},[t._v("\n                Save\n              ")])],1)])],2)],1)],1)],1)],1)},gt=[],yt=(r("28a5"),r("681e")),wt=r.n(yt),kt={name:"Dialog",props:{show:{type:Boolean,required:!1},isEditing:{type:Boolean,required:!1},width:{type:String,required:!1,default:"1000px"},height:{type:String,default:"calc(100vh)"},background:{type:String,default:""},goBack:Function,enableMenu:Boolean,enableBar:{type:Boolean,default:!0},title:String,dark:Boolean,readonly:Boolean},data:function(){return{showDialog:this.show,listener:null,banner:wt.a,isSubmitting:!1}},computed:{mobile:function(){return this.$vuetify.breakpoint.xs||this.$vuetify.breakpoint.sm},style:function(){return{position:"fixed",backgroundColor:"#292929",maxWidth:this.width}},splitTitle:function(){var t={},e=this.title,r="----";if(-1!==e.indexOf(r)){var n="-",a=2,o=e.split(n).slice(0,a+1).join(n),i=e.split(n).slice(a).join(n);return t={maori:o,english:i},t}return t={maori:"",english:e},t}},methods:{submit:function(){this.isSubmitting||(this.isSubmitting=!0,this.$emit("submit"))},closeDialog:function(){this.isSubmitting=!1,this.showDialog=!1,this.close()},close:function(){this.isSubmitting=!1,this.$emit("close")}},mounted:function(){var t=this;this.listener=document.addEventListener("keydown",(function(e){27===e.keyCode&&t.close()})),document.body.style.top="-".concat(window.scrollY,"px"),document.body.style.minWidth="100%",document.body.style.position="fixed"},destroyed:function(){document.removeEventListener("keydown",this.listener);var t=document.body.style.top;document.body.style.position="",document.body.style.top="",window.scrollTo(0,-1*parseInt(t||"0"))}},xt=kt,_t=(r("33fd"),r("8336")),Ot=r("b0af"),Ct=r("99d9"),Pt=r("a523"),jt=r("169a"),It=r("ce7e"),St=r("132d"),Et=r("2fa4"),At=Object(b["a"])(xt,bt,gt,!1,null,null,null),Dt=At.exports;y()(At,{VAppBar:w["a"],VBtn:_t["a"],VCard:Ot["a"],VCardActions:Ct["a"],VCardText:Ct["b"],VCol:rt["a"],VContainer:Pt["a"],VDialog:jt["a"],VDivider:It["a"],VIcon:St["a"],VImg:at["a"],VRow:it["a"],VSpacer:Et["a"]});var Vt={name:"GenerateInviteDialog",components:{Dialog:Dt},props:{show:{type:Boolean,required:!0},title:{type:String},publicIpv4:{type:String,default:"xxx.xxx.xx.xx"},portForwarding:{type:Boolean,default:!1},checkPortForwarding:{type:Function},checkingPort:{type:Boolean,default:!1},errorMsg:{type:String}},data:function(){return{type:"",value:"",externalIp:null}},computed:{ip:{get:function(){return this.externalIp||this.publicIpv4},set:function(t){this.externalIp=t}},uses:function(){switch(this.value){case"single use":return 1;case"100 uses":return 100;case"1,000 uses":return 1e3;case"100,000 uses":return 1e5;default:return 1}}},methods:{submit:function(){console.log(this.externalIp),console.log(this.publicIpv4);var t="Connect locally over wifi"===this.type?null:this.externalIp||this.publicIpv4;console.log(t),this.$emit("generate",{ip:t,uses:this.uses}),this.close()},close:function(){this.$emit("close")}}},Lt=Vt,$t=(r("3ebb"),r("b974")),Bt=r("8654"),Tt=Object(b["a"])(Lt,ht,mt,!1,null,"19affac4",null),Ft=Tt.exports;y()(Tt,{VBtn:_t["a"],VCol:rt["a"],VRow:it["a"],VSelect:$t["a"],VTextField:Bt["a"]});var Rt,Nt,Mt,qt,Ut,zt,Ht,Gt,Wt,Xt,Jt=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("v-card",{staticClass:"mt-4",attrs:{"max-width":"400"}},[r("v-sheet",{staticClass:"v-sheet--offset mx-auto",attrs:{color:"primary",tile:""}},[r("v-card-text",[r("v-row",{staticClass:"mt-0 ml-0",attrs:{align:"end"}},[r("h2",[t._v(t._s(t.title))]),r("span",{staticClass:"pl-4 caption"},[t._v("usage in last hour")])])],1),r("v-sparkline",{attrs:{labels:t.labels,value:t.values,gradient:["red","#0484c4","#53cb62"],"line-width":"1",padding:"16"}})],1)],1)},Kt=[],Yt={name:"Meter",props:{title:String,labels:Array,values:Array}},Qt=Yt,Zt=(r("122d"),r("8dd9")),te=r("7f2e"),ee=Object(b["a"])(Qt,Jt,Kt,!1,null,"60b500b3",null),re=ee.exports;function ne(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function ae(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?ne(Object(r),!0).forEach((function(e){Object(p["a"])(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):ne(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}y()(ee,{VCard:Ot["a"],VCardText:Ct["b"],VRow:it["a"],VSheet:Zt["a"],VSparkline:te["a"]});var oe=1e3,ie={name:"Dashboard",data:function(){return{dialog:!1,ipSet:!1,copyText:"Copy",generatedInvite:null,generateError:!1,errorMsg:null,checkingPort:null,invitedPeople:[],tribes:[],profile:{feedId:"",preferredName:"",avatarImage:null},portForwarding:null,network:{internetLatency:null,ipv4:null,ipv6:null,publicIpv4:null},diskUsage:[],cpuLoad:[0,0],memoryLoad:[0,0]}},computed:{latency:function(){return this.network.internetLatency&&-1!==this.network.internetLatency?"".concat(this.network.internetLatency," ms"):"Unknown"},cloudHost:function(){return"localhost"!==window.location.hostname}},apollo:{profile:{query:s()(Rt||(Rt=Object(n["a"])(["query {\n        whoami {\n          public {\n          feedId\n          profile {\n            id\n            preferredName\n            avatarImage {\n              uri\n            }\n          }\n          }\n        }\n      }"]))),update:function(t){return t.whoami.public.profile&&t.whoami.public.profile.preferredName||this.$router.push({name:"login"}),ae(ae({},t.whoami.public.profile),{},{feedId:t.whoami.public.feedId})}},network:{query:s()(Nt||(Nt=Object(n["a"])(["query {\n        network {\n          ipv4\n          internetLatency\n          publicIpv4\n          portForwarding\n        }\n      }"]))),pollInterval:10*oe},portForwarding:{query:s()(Mt||(Mt=Object(n["a"])(["query {\n        network {\n          portForwarding\n        }\n      }"]))),update:function(t){return t.network.portForwarding}},cpuLoad:{query:s()(qt||(qt=Object(n["a"])(["query {\n        cpuLoad\n      }"]))),pollInterval:10*oe,update:function(t){return this.cpuLoad.length>=360||0===this.cpuLoad[this.cpuLoad.length-1]?this.cpuLoad.pop():0===this.cpuLoad[0]&&this.cpuLoad.shift(),[].concat(Object(N["a"])(this.cpuLoad),[t.cpuLoad])}},memoryLoad:{query:s()(Ut||(Ut=Object(n["a"])(["query {\n        memoryLoad\n      }"]))),pollInterval:10*oe,update:function(t){return this.memoryLoad.length>=360?this.memoryLoad.pop():0===this.memoryLoad[0]&&this.memoryLoad.shift(),[].concat(Object(N["a"])(this.memoryLoad),[t.memoryLoad])}},diskUsage:{query:s()(zt||(zt=Object(n["a"])(["query {\n        diskUsage {\n          use\n          fs\n        }\n      }"]))),pollInterval:10*oe},invitedPeople:{query:s()(Ht||(Ht=Object(n["a"])(["query {\n        invitedPeople {\n          type\n          id\n          preferredName\n          avatarImage {\n            uri\n          }\n          ...on Person {\n            gender\n          }\n        }\n      }\n      "]))),pollInterval:5*oe},tribes:{query:s()(Gt||(Gt=Object(n["a"])(["query {\n        tribes {\n          public {\n            preferredName\n            avatarImage {\n              uri\n            }\n          }\n        }\n      }"]))),update:function(t){return t.tribes.filter((function(t){return t.public&&t.public[0]})).map((function(t){return t.public[0]}))},pollInterval:10*oe}},methods:{logout:function(){this.$router.push("/")},toggleDialog:function(){var t=Object(a["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:this.dialog=!this.dialog;case 1:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),generateInviteCode:function(){var t=Object(a["a"])(regeneratorRuntime.mark((function t(e){var r,a,o,i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return r=e.ip,a=e.uses,o=r?{external:r,uses:a}:{uses:a},console.log("input: ",o),t.prev=3,t.next=6,this.$apollo.mutate({mutation:s()(Wt||(Wt=Object(n["a"])(["\n              mutation ($input: createInviteInput) {\n                createInvite(input: $input)\n              }\n              "]))),variables:{input:ae({},o)}});case 6:i=t.sent,this.generateError=!1,this.dialog=!1,this.generatedInvite=i.data.createInvite,this.copyText="Copy",t.next=18;break;case 13:throw t.prev=13,t.t0=t["catch"](3),console.error(t.t0),this.generateError="something went wrong while trying to generate an invite code",t.t0;case 18:case"end":return t.stop()}}),t,this,[[3,13]])})));function e(e){return t.apply(this,arguments)}return e}(),tryInvite:function(){var t=Object(a["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!this.portForwarding){t.next=3;break}return t.next=3,this.generateInviteCode(this.network.publicIpv4);case 3:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),checkPortForwarding:function(){var t=Object(a["a"])(regeneratorRuntime.mark((function t(){var e,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return this.checkingPort=!0,this.errorMsg=null,t.next=4,this.$apollo.query({query:s()(Xt||(Xt=Object(n["a"])(["query {\n            network {\n              portForwarding\n            }\n          }"])))});case 4:if(e=t.sent,r=e.data.network.portForwarding,this.portForwarding=r,!r){t.next=13;break}return t.next=10,this.tryInvite();case 10:this.errorMsg=null,t.next=14;break;case 13:this.errorMsg="Port not open";case 14:this.checkingPort=!1;case 15:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),copyCode:function(){var t=Object(a["a"])(regeneratorRuntime.mark((function t(){var e=this;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:navigator.clipboard.writeText(this.generatedInvite).then((function(){e.copyText="Copied"})).catch((function(t){console.error("Could not copy text: ",t)}));case 1:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()},components:{Avatar:ct,AvatarGroup:vt,Meter:re,GenerateInviteDialog:Ft}},se=ie,ce=(r("b985"),r("8e36")),le=Object(b["a"])(se,F,R,!1,null,null,null),ue=le.exports;y()(le,{VBtn:_t["a"],VCol:rt["a"],VContainer:Pt["a"],VIcon:St["a"],VProgressLinear:ce["a"],VRow:it["a"]});var pe,de=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"container"},[t.isLoading?n("div",{staticClass:"splash"},[n("img",{attrs:{src:r("0ddb")}}),n("h1",[t._v("Āhau Pātaka")])]):t._e(),t.isLoading||t.isSetup?!t.isLoading&&t.isSetup&&t.cloudHost?n("div",{staticClass:"welcome-text",staticStyle:{"justify-items":"center",display:"grid"}},[n("v-row",{staticClass:"pb-12"},[n("p",{staticClass:"mb-0 headliner2",staticStyle:{color:"darkgrey"}},[t._v("enter password")])]),n("v-row",{staticClass:"mt-10"},[n("v-col",{attrs:{cols:"12"}},[n("v-text-field",{staticStyle:{"background-color":"#303030",width:"300px"},attrs:{label:"Password",outlined:"",width:"150px",type:"password","error-messages":t.passwordRules},on:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.checkPassword(e)}},model:{value:t.passwordInput,callback:function(e){t.passwordInput=e},expression:"passwordInput"}})],1)],1),n("v-row",[n("v-btn",{staticStyle:{"border-color":"#b12526","background-color":"#303030"},attrs:{text:"",color:"#b12526",outlined:""},on:{click:function(e){return e.preventDefault(),t.createPassword(e)}}},[n("p",{staticClass:"login-text mb-0"},[t._v("submit")])])],1)],1):t._e():n("div",{staticClass:"welcome-text",staticStyle:{"justify-items":"center",display:"grid"}},[n("v-row",[n("p",{staticClass:"mb-0 headliner"},[t._v("Nau mai")])]),n("v-row",[n("p",{staticClass:"mb-0 headliner"},[t._v("Whakatau mai")])]),n("v-row",{staticClass:"pb-12"},[n("p",{staticClass:"mb-0 headliner2",staticStyle:{color:"darkgrey"}},[t._v("welcome")])]),n("v-row",{staticClass:"mt-10"},[n("v-btn",{staticStyle:{"border-color":"#b12526","background-color":"#303030"},attrs:{text:"","x-large":"",color:"#b12526",outlined:""},on:{click:function(e){return e.preventDefault(),t.toggleNew(e)}}},[n("p",{staticClass:"login-text mb-0"},[t._v("create pataka")])])],1)],1),t.dialog?n("NewNodeDialog",{attrs:{show:t.dialog,title:"Āhau Pātaka"},on:{close:t.toggleNew,create:function(e){return t.save(e)}}}):t._e()],1)},fe=[],ve=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("Dialog",{attrs:{show:t.show,title:t.title,width:"720px",goBack:t.close,enableMenu:""},on:{close:t.close},scopedSlots:t._u([{key:"content",fn:function(){return[r("v-col",{staticClass:"py-0"},[r("ProfileForm",{attrs:{profile:t.formData,mobile:t.mobile},on:{"update:profile":function(e){t.formData=e}}})],1)]},proxy:!0},{key:"actions",fn:function(){return[r("v-btn",{staticClass:"secondary--text",attrs:{text:"",large:"",fab:""},on:{click:t.close}},[r("span",{attrs:{color:"secondary"}},[t._v("cancel")])]),r("v-btn",{staticClass:"blue--text ml-5",attrs:{text:"",large:"",fab:""},on:{click:t.submit}},[r("span",[t._v("save")])])]},proxy:!0}])})},he=[],me=r("3835"),be=(r("ffc1"),function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("v-form",{ref:"form",staticClass:"px-4 pt-4",attrs:{light:""}},[r("v-row",[r("v-col",{staticClass:"pt-6",attrs:{order:t.mobile?"":"2"}},[r("v-row",{staticClass:"justify-center pt-3"},[r("Avatar",{staticClass:"big-avatar",attrs:{size:"200px",type:"pataka",image:t.formData.avatarImage,alt:t.formData.preferredName,isEditing:t.isEditing,isView:!1},on:{updateAvatar:function(e){t.formData.avatarImage=e}}})],1),t.isEditing?r("v-row",{staticClass:"justify-center"},[r("v-btn",{staticClass:"blue--text",attrs:{color:"white",text:"",medium:""},on:{click:function(e){return t.$emit("cancel")}}},[r("v-icon",{staticClass:"blue--text",attrs:{small:"",left:""}},[t._v("mdi-close")]),t._v("Cancel\n        ")],1)],1):t._e(),r("v-row",[t.isEditing?t._e():r("v-col",{staticClass:"pa-0",attrs:{cols:"12",justify:"center",align:"center"}},[r("ImagePicker",{attrs:{avatarLoaded:t.formData.avatarImage},on:{updateAvatar:function(e){t.formData.avatarImage=e}}})],1)],1)],1),r("v-col",{staticClass:"pt-2",attrs:{cols:"12",sm:t.mobile?"12":"6"}},[r("v-row",[r("v-col",{staticClass:"pa-1",attrs:{cols:"12"}},[r("v-text-field",{attrs:{label:"Pātaka name",outlined:"",rules:t.nameRules,required:""},model:{value:t.formData.preferredName,callback:function(e){t.$set(t.formData,"preferredName",e)},expression:"formData.preferredName"}})],1)],1),r("v-row",[r("v-col",{staticClass:"pa-1",attrs:{cols:"12"}},[r("v-textarea",{attrs:{label:"Description","no-resize":"",rows:"5","auto-grow":"",outlined:""},model:{value:t.formData.description,callback:function(e){t.$set(t.formData,"description",e)},expression:"formData.description"}})],1)],1)],1)],1)],1)}),ge=[],ye=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",[r("clipper-upload",{attrs:{accept:"image/*"},on:{input:t.toggleAvatar}},[r("v-row",{staticClass:"upload-pic-row"},[r("v-icon",{staticClass:"grey--text pr-2 pt-1"},[t._v("mdi-camera")]),r("p",{staticClass:"toggle"},[t._v("\n        "+t._s(t.label||"Upload Photo")+"\n      ")])],1)],1),t.avatar.showEditor?r("AvatarEditDialog",{attrs:{show:t.avatar.showEditor,avatarImage:t.avatar.new,isView:t.isView,type:t.type},on:{submit:function(e){return t.updateAvatar(e)},close:function(e){return t.toggleAvatar(null)}}}):t._e()],1)},we=[],ke=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("Dialog",{attrs:{title:"Crop Photo",show:t.show,width:"750px",goBack:t.close,enableMenu:"",dark:""},on:{submit:t.submit,close:t.close},scopedSlots:t._u([{key:"content",fn:function(){return[r("v-row",{attrs:{justify:"center"}},[r("v-col",{staticStyle:{"max-width":"300px"}},[r("clipper-fixed",{ref:"avatar",attrs:{grid:!1,src:t.avatarImage,area:100,round:!t.tile,"bg-color":"rgba(0, 0, 0, 0)",shadow:"rgba(0,0,0,0.5)",rotate:t.rotation}})],1)],1),r("div",{staticClass:"px-8 py-4"},[r("h6",{staticClass:"caption pt-8 white--text"},[r("v-icon",{attrs:{dark:""}},[t._v("mdi-gesture-tap")]),t._v("\n        Adjust the image by zooming, scaling and moving it around before\n        saving.\n      ")],1),r("h5",{staticClass:"pt-8 white--text"},[t._v("rotate")]),r("clipper-range",{staticStyle:{"max-width":"300px"},attrs:{min:0,max:360},model:{value:t.rotation,callback:function(e){t.rotation=e},expression:"rotation"}})],1)]},proxy:!0}])})},xe=[];function _e(t){return new window.File([t],"avatar",{type:t.type})}var Oe=s()(pe||(pe=Object(n["a"])(["\n  mutation uploadFile($file: Upload!, $size: Int!, $encrypt: Boolean) {\n    uploadFile(file: $file, size: $size, encrypt: $encrypt) {\n      type\n      blobId\n      mimeType\n      uri\n      size\n\n      ...on BlobScuttlebutt {\n        unbox\n      }\n\n      ...on BlobHyper {\n        driveAddress\n        readKey\n      }\n    }\n  }\n"])));function Ce(t){return console.log(t),{mutation:Oe,variables:{file:t.file,size:t.file.size,encrypt:t.encrypt}}}var Pe="$2a$10$8tvJDew.Y.cYfb01hq8nPeq9MpnhneiINRdzS3AsA7AtXZZ0Vt5EG",je=1048576,Ie=5*je,Se={name:"AvatarEditDialog",components:{Dialog:Dt},props:{show:{type:Boolean,default:!1},avatarImage:String,tile:Boolean},data:function(){return{rotation:0}},methods:{close:function(){this.$emit("close")},submit:function(){var t=Object(a["a"])(regeneratorRuntime.mark((function t(){var e,r=this;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:t.prev=0,e=this.$refs.avatar.clip({maxWPixel:"header"===this.type?1920:800}),e.toBlob(function(){var t=Object(a["a"])(regeneratorRuntime.mark((function t(e){var n,a,o;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(n=_e(e),!(n.size>=5242880)){t.next=4;break}throw console.error("this avatar image is bigger than 5MB, we cannot allow this through, otherwise it will end up a hyperblob, which AvatarImage does not currently support"),new Error("avatar image must me < 5MB");case 4:return t.next=6,r.uploadFile({file:n,encrypt:!0});case 6:a=t.sent,null===a.mimeType&&(a.mimeType=n.type),"Hello World"===a.mimeType&&(a.mimeType=n.type),console.log(JSON.stringify(a,null,2)),a.blobId&&(a.blob=a.blobId),delete a.blobId,o={},Object.entries(a).forEach((function(t){var e=Object(me["a"])(t,2),r=e[0],n=e[1];"__typename"!==r&&"type"!==r&&(o[r]=n)})),r.$emit("submit",o);case 15:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()),t.next=8;break;case 5:throw t.prev=5,t.t0=t["catch"](0),t.t0;case 8:case"end":return t.stop()}}),t,this,[[0,5]])})));function e(){return t.apply(this,arguments)}return e}(),uploadFile:function(){var t=Object(a["a"])(regeneratorRuntime.mark((function t(e){var r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(t.prev=0,!(e.file&&e.file.size>Ie)){t.next=3;break}throw new Error("Please check the file size is less than 5MB");case 3:return t.next=5,this.$apollo.mutate(Ce(e));case 5:if(r=t.sent,console.log("here"),!r.errors){t.next=9;break}throw r.errors;case 9:return t.abrupt("return",r.data.uploadFile);case 12:return t.prev=12,t.t0=t["catch"](0),console.error("Something went wrong while trying to upload a file",t.t0),t.abrupt("return",null);case 16:case"end":return t.stop()}}),t,this,[[0,12]])})));function e(e){return t.apply(this,arguments)}return e}()}},Ee=Se,Ae=Object(b["a"])(Ee,ke,xe,!1,null,null,null),De=Ae.exports;y()(Ae,{VCol:rt["a"],VIcon:St["a"],VRow:it["a"]});var Ve={name:"ImagePicker",components:{AvatarEditDialog:De},props:{label:{type:String},isView:{type:Boolean,default:!1},type:String},data:function(){return{avatar:{new:null,showEditor:!1}}},methods:{toggleAvatar:function(t){this.avatar.new=this.avatar.new?null:t,this.avatar.showEditor=!this.avatar.showEditor},updateAvatar:function(t){this.$emit("updateAvatar",t),this.toggleAvatar(null)}}},Le=Ve,$e=(r("b19c"),Object(b["a"])(Le,ye,we,!1,null,"416cf575",null)),Be=$e.exports;y()($e,{VIcon:St["a"],VRow:it["a"]});var Te={name:"ProfileForm",components:{Avatar:ct,ImagePicker:Be},props:{profile:{type:Object,required:!0},mobile:{type:Boolean,default:!1},isEditing:{type:Boolean,default:!1}},data:function(){return{formData:this.profile,form:{valid:!0,showDescription:!1},nameRules:[function(t){return!!t||"Pataka name required"}]}}},Fe=Te,Re=(r("58fa"),r("4bd4")),Ne=r("a844"),Me=Object(b["a"])(Fe,be,ge,!1,null,"a6af38ba",null),qe=Me.exports;y()(Me,{VBtn:_t["a"],VCol:rt["a"],VForm:Re["a"],VIcon:St["a"],VRow:it["a"],VTextField:Bt["a"],VTextarea:Ne["a"]});var Ue=r("23db"),ze=r.n(Ue);function He(){var t={id:"",preferredName:"",avatarImage:{},description:""};return t}var Ge={name:"NewNodeDialog",components:{Dialog:Dt,ProfileForm:qe},props:{show:{type:Boolean,required:!0},title:{type:String,default:"Create a new Pātaka"}},data:function(){return{formData:He()}},computed:{mobile:function(){return this.$vuetify.breakpoint.xs},submission:function(){var t=this,e={};return Object.entries(this.formData).map((function(r){var n=Object(me["a"])(r,2),a=n[0],o=n[1];ze()(t.formData[a])||(e[a]=o)})),e}},methods:{submit:function(){this.submission&&!this.submission.preferredName||(this.$emit("create",this.submission),this.close())},close:function(){this.resetFormData(),this.$emit("close")},resetFormData:function(){this.formData=He()}}},We=Ge,Xe=(r("7c32"),Object(b["a"])(We,ve,he,!1,null,"9a6948e0",null)),Je=Xe.exports;y()(Xe,{VBtn:_t["a"],VCol:rt["a"]});var Ke,Ye,Qe=r("88bc3"),Ze=r.n(Qe),tr=r("9051"),er=r.n(tr);function rr(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function nr(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?rr(Object(r),!0).forEach((function(e){Object(p["a"])(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):rr(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}var ar="\n---------------------------------\nE te tangata\nWhāia te māutauranga kai mārama\nKia whai take ngā mahi katoa\nTū māia, tū kaha\nAroha atu, aroha mai\nTātou i a tātou katoa\n\nFor this person\nSeek knowledge for understanding\nHave purpose in all that you do\nStand tall, be strong\nLets us all show respect\nFor each other\n---------------------------------\n",or={data:function(){return{isLoading:!0,isSetup:!1,profile:{id:null,preferredName:null,avatarImage:null},dialog:!1,passwordInput:"",passwordError:!1,passwordRules:[]}},computed:{cloudHost:function(){return"localhost"!==window.location.hostname}},mounted:function(){this.getCurrentIdentity()},methods:{createPassword:function(){var t=Object(a["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,er.a.hash(this.passwordInput,10,(function(t,e){t?console.log("error encrypting password: ",t):console.log("hash: ",e)}));case 2:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),checkPassword:function(){var t=this;er.a.compare(this.passwordInput,Pe).then((function(e){e?(t.karakiaTūwhera(),t.$router.push({name:"dashboard"})):t.passwordRules.push("Password incorrect. Try again")}))},getCurrentIdentity:function(){var t=Object(a["a"])(regeneratorRuntime.mark((function t(){var e;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.$apollo.query({query:s()(Ke||(Ke=Object(n["a"])(["\n          {\n            whoami {\n              public {\n                profile {\n                  id\n                  preferredName\n                  avatarImage {\n                    uri\n                  }\n                }\n              }\n            }\n          }\n        "]))),fetchPolicy:"no-cache"});case 2:if(e=t.sent,!e.errors){t.next=5;break}throw e.errors;case 5:e.data.whoami.public.profile&&(this.profile=e.data.whoami.public.profile),this.proceed();case 7:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),"karakiaTūwhera":function(){console.log(ar)},proceed:function(){if(this.$apollo.loading||!this.profile.id)return console.log("waiting for apollo"),void setTimeout(this.proceed,300);this.isSetup=Boolean(this.profile.preferredName),this.isSetup&&!this.cloudHost&&(this.karakiaTūwhera(),this.$router.push({name:"dashboard"})),this.isLoading=!1},toggleNew:function(){this.dialog=!this.dialog},save:function(){var t=Object(a["a"])(regeneratorRuntime.mark((function t(e){var r,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return r=Ze()(e,"preferredName","description","avatarImage"),r.avatarImage&&delete r.avatarImage.uri,t.next=4,this.$apollo.mutate({mutation:s()(Ye||(Ye=Object(n["a"])(["\n          mutation($input: ProfileInput!) {\n            saveProfile(input: $input)\n          }\n        "]))),variables:{input:nr(nr({id:this.profile.id},r),{},{allowPublic:!0})}});case 4:if(a=t.sent,!a.errors){t.next=8;break}return console.error("failed to update profile",a),t.abrupt("return");case 8:this.getCurrentIdentity();case 9:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}()},components:{NewNodeDialog:Je}},ir=or,sr=(r("b363"),Object(b["a"])(ir,de,fe,!1,null,"4c5762e7",null)),cr=sr.exports;y()(sr,{VBtn:_t["a"],VCol:rt["a"],VRow:it["a"],VTextField:Bt["a"]}),o["a"].use(T["a"]);var lr=new T["a"]({mode:"history",routes:[{path:"/",redirect:"/login"},{path:"/login",name:"login",component:cr},{path:"/logout",redirect:"/login"},{path:"/dashboard",name:"dashboard",component:ue},{path:"*",redirect:"/"}]}),ur=r("2ef0"),pr=r("94ba"),dr=r.n(pr),fr=Object({NODE_ENV:"production",VUE_APP_MIXPANEL_API_HOST:"https://api-eu.mixpanel.com",VUE_APP_MIXPANEL_TOKEN:"34c9aa7a76fedf7e4bd6f6e1d118a251",VUE_APP_PLATFORM:"web",BASE_URL:""}),vr=fr.VUE_APP_MIXPANEL_TOKEN,hr=fr.VUE_APP_MIXPANEL_API_HOST,mr=void 0===hr?"https://api-eu.mixpanel.com":hr,br=1e3,gr=60*br,yr=60*gr,wr=1*yr,kr={track:function(){}};kr.throttledTrack=Object(ur["throttle"])(kr.track,wr);var xr={};function _r(){return window.ahoy?(dr.a.init(vr,{api_host:mr}),window.ahoy.getConfig().then((function(t){var e=t.mixpanelId;dr.a.identify(e),dr.a.people.set({application:"ahau",isPataka:!0,isMobile:!1,userId:e}),dr.a.throttledTrack=function(t){xr[t]||(xr[t]=Object(ur["throttle"])(dr.a.track,wr,{trailing:!1}).bind(dr.a,t));for(var e=arguments.length,r=new Array(e>1?e-1:0),n=1;n<e;n++)r[n-1]=arguments[n];return xr[t].apply(xr,r)}})),dr.a):(console.log("(analytics) window.ahoy not found - this is only accessible in electron"),kr)}var Or=_r(),Cr=r("40fd").version,Pr={},jr={},Ir={},Sr={patakaPing:function(t){t.state,t.commit;Or.throttledTrack("pataka-ping",{version:Cr})}},Er={namespaced:!0,state:Pr,getters:jr,mutations:Ir,actions:Sr};function Ar(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function Dr(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?Ar(Object(r),!0).forEach((function(e){Object(p["a"])(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Ar(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}o["a"].use(d["b"]);var Vr={state:{},getters:{},mutations:{},actions:{}},Lr=new d["b"].Store(Dr(Dr({},Vr),{},{modules:{analytics:Er}})),$r=r("522d"),Br=r("557e"),Tr=r("e77a"),Fr=r("2bf2"),Rr=r("cbfa");function Nr(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function Mr(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?Nr(Object(r),!0).forEach((function(e){Object(p["a"])(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Nr(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}var qr=r("f79a")(),Ur=new Fr["a"]({introspectionQueryResultData:Rr});o["a"].use($r["a"]);var zr=window.location.origin.split(":")[1],Hr=Object({NODE_ENV:"production",VUE_APP_MIXPANEL_API_HOST:"https://api-eu.mixpanel.com",VUE_APP_MIXPANEL_TOKEN:"34c9aa7a76fedf7e4bd6f6e1d118a251",VUE_APP_PLATFORM:"web",BASE_URL:""}).VUE_APP_GRAPHQL_HTTP||"".concat(zr,":").concat(qr.pataka.graphql.port,"/graphql");function Gr(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=new Br["ApolloClient"](Mr(Mr({},t),{},{ssrMode:"undefined"===typeof window,cache:new Br["InMemoryCache"]({fragmentMatcher:Ur}),link:Object(Tr["createUploadLink"])({uri:Hr})})),r=new $r["a"]({defaultClient:e,defaultOptions:{$query:{}},errorHandler:function(t){console.log("%cError","background: red; color: white; padding: 2px 4px; border-radius: 3px; font-weight: bold;",t.message)}});return r}Gr();r("5363"),r("d4b8");var Wr=r("f309"),Xr="#bfbfbf",Jr="#427979",Kr={theme:{dark:!0,themes:{dark:{primary:"#383838",secondary:"#A80000",accent:"#A70000",error:"#ff0000",alive:Jr,deceased:Xr}},options:{customProperties:!0}},icons:{iconfont:"mdi"}};o["a"].use(Wr["a"]);var Yr,Qr=new Wr["a"](Kr);function Zr(){return tn.apply(this,arguments)}function tn(){return tn=Object(a["a"])(regeneratorRuntime.mark((function t(){var e,r,i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:i=function(){return i=Object(a["a"])(regeneratorRuntime.mark((function t(a){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e.defaultClient.query({query:s()(Yr||(Yr=Object(n["a"])(["{\n          whoami {\n            public {\n              feedId\n            }\n          }\n        }"])))});case 3:t.next=9;break;case 5:return t.prev=5,t.t0=t["catch"](0),console.log("Waiting for Graphql"),t.abrupt("return",setTimeout((function(){return r(a)}),500));case 9:a();case 10:case"end":return t.stop()}}),t,null,[[0,5]])}))),i.apply(this,arguments)},r=function(t){return i.apply(this,arguments)},o["a"].use(c["a"]),o["a"].config.productionTip=!1,e=Gr(),r((function(){new o["a"]({router:lr,store:Lr,apolloProvider:e,vuetify:Qr,render:function(t){return t(B)}}).$mount("#app")}));case 6:case"end":return t.stop()}}),t)}))),tn.apply(this,arguments)}Zr()},"58fa":function(t,e,r){"use strict";r("7af8")},"5c0b":function(t,e,r){"use strict";r("9c0c")},6:function(t,e){},"681e":function(t,e,r){t.exports=r.p+"img/bg-tohu.20413dcf.png"},7:function(t,e){},"7af8":function(t,e,r){},"7c32":function(t,e,r){"use strict";r("c44d")},8:function(t,e){},9:function(t,e){},9302:function(t,e,r){"use strict";r("099e")},"9b52":function(t,e,r){},"9c0c":function(t,e,r){},a03d:function(t,e,r){},aea9:function(t,e,r){},b19c:function(t,e,r){"use strict";r("9b52")},b363:function(t,e,r){"use strict";r("aea9")},b985:function(t,e,r){"use strict";r("de7f")},c44d:function(t,e,r){},c853:function(t,e,r){t.exports=r.p+"img/whakapapa.4b77dc93.svg"},cbfa:function(t){t.exports=JSON.parse('{"__schema":{"types":[{"name":"Blob","kind":"INTERFACE","possibleTypes":[{"name":"BlobScuttlebutt","description":"Blobs of the ssb-blobs variety"},{"name":"BlobHyper","description":"Blobs of the ssb-hyper-blobs variety"}]},{"name":"_Entity","kind":"UNION","possibleTypes":[{"name":"CurrentIdentity","description":"Secure Scuttlebutt current identity"},{"name":"PublicIdentity","description":null},{"name":"PersonalIdentity","description":null},{"name":"Peer","description":"Secure Scuttlebutt replication peer"}]},{"name":"Profile","kind":"INTERFACE","possibleTypes":[{"name":"Person","description":"Person fields used by ssb-profile plugin"},{"name":"Pataka","description":null},{"name":"Community","description":"Community profile (fields from ssb-profile plugin)"}]}]}}')},d440:function(t,e,r){t.exports=r.p+"img/wahine.93ba9771.svg"},de7f:function(t,e,r){},e46f:function(t,e,r){},fed5:function(t,e,r){}});
//# sourceMappingURL=app.65f13fb3.js.map